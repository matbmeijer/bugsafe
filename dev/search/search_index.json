{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"bugsafe","text":"<p>Safe-to-share crash bundles for humans and LLMs.</p> <p>bugsafe captures Python crashes and creates redacted, shareable bug reports. It automatically removes API keys, tokens, passwords, and other secrets while preserving the information needed to debug issues.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Automatic secret redaction \u2014 25+ patterns for API keys, tokens, passwords, connection strings</li> <li>Correlation preservation \u2014 Same secret \u2192 same token throughout the bundle</li> <li>Path anonymization \u2014 Removes usernames and sensitive paths</li> <li>Rich environment capture \u2014 Python version, packages, git info, environment variables</li> <li>Multiple output formats \u2014 Markdown for humans, JSON for tools, LLM-optimized context</li> <li>Zero configuration \u2014 Works out of the box with sensible defaults</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install bugsafe\n</code></pre>"},{"location":"#capture-a-crash","title":"Capture a Crash","text":"<pre><code>bugsafe run -- python my_script.py\n</code></pre>"},{"location":"#render-for-sharing","title":"Render for Sharing","text":"<pre><code># Markdown for humans\nbugsafe render crash.bugbundle\n\n# Optimized for LLMs\nbugsafe render crash.bugbundle --llm\n</code></pre>"},{"location":"#example-output","title":"Example Output","text":"<pre><code># Bug Report: demo.py\n\n## Error\nConnectionError: Failed to connect to &lt;API_HOST_1&gt;\n\n## Traceback\nFile \"&lt;PROJECT&gt;/app.py\", line 42, in connect\n    response = requests.get(url, headers={\"Authorization\": &lt;API_KEY_1&gt;})\n\n## Environment\n- Python: 3.12.0\n- Platform: linux\n- Packages: requests==2.31.0, pydantic==2.5.0\n</code></pre> <p>Notice how secrets are replaced with tokens like <code>&lt;API_KEY_1&gt;</code> while preserving correlation.</p>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li> <p> Installation</p> <p>Get bugsafe installed in your environment</p> </li> <li> <p> Quick Start</p> <p>Create your first crash bundle in 5 minutes</p> </li> <li> <p> Security Model</p> <p>Learn how bugsafe protects your secrets</p> </li> <li> <p> API Reference</p> <p>Use bugsafe programmatically</p> </li> </ul>"},{"location":"CONTRIBUTING/","title":"Contributing (Legacy)","text":"<p>Legacy Documentation</p> <p>This page has been superseded by the new documentation structure. See Development Setup for the current version.</p>"},{"location":"CONTRIBUTING/#contributing-to-bugsafe","title":"Contributing to bugsafe","text":"<p>Thank you for your interest in contributing to bugsafe! This document provides guidelines for development setup and contribution workflow.</p>"},{"location":"CONTRIBUTING/#development-setup","title":"Development Setup","text":""},{"location":"CONTRIBUTING/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>uv package manager</li> <li>Git</li> </ul>"},{"location":"CONTRIBUTING/#clone-and-install","title":"Clone and Install","text":"<pre><code># Clone the repository\ngit clone https://github.com/matbmeijer/bugsafe.git\ncd bugsafe\n\n# Install dependencies with uv\nuv sync\n\n# Verify installation\nuv run bugsafe --version\n</code></pre>"},{"location":"CONTRIBUTING/#project-structure","title":"Project Structure","text":"<pre><code>bugsafe/\n\u251c\u2500\u2500 src/bugsafe/\n\u2502   \u251c\u2500\u2500 __init__.py          # Package version\n\u2502   \u251c\u2500\u2500 cli.py               # CLI commands\n\u2502   \u251c\u2500\u2500 config.py            # Configuration management\n\u2502   \u251c\u2500\u2500 capture/             # Command capture module\n\u2502   \u2502   \u251c\u2500\u2500 runner.py        # Process execution\n\u2502   \u2502   \u251c\u2500\u2500 traceback.py     # Traceback parsing\n\u2502   \u2502   \u2514\u2500\u2500 environment.py   # Environment collection\n\u2502   \u251c\u2500\u2500 redact/              # Redaction module\n\u2502   \u2502   \u251c\u2500\u2500 patterns.py      # Secret patterns\n\u2502   \u2502   \u251c\u2500\u2500 tokenizer.py     # Token generation\n\u2502   \u2502   \u251c\u2500\u2500 path_anonymizer.py\n\u2502   \u2502   \u2514\u2500\u2500 engine.py        # Redaction orchestration\n\u2502   \u251c\u2500\u2500 bundle/              # Bundle format module\n\u2502   \u2502   \u251c\u2500\u2500 schema.py        # Pydantic models\n\u2502   \u2502   \u251c\u2500\u2500 writer.py        # Bundle creation\n\u2502   \u2502   \u2514\u2500\u2500 reader.py        # Bundle reading\n\u2502   \u2514\u2500\u2500 render/              # Output rendering module\n\u2502       \u251c\u2500\u2500 markdown.py      # Markdown output\n\u2502       \u2514\u2500\u2500 json_export.py   # JSON/LLM output\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 unit/                # Unit tests\n\u2502   \u251c\u2500\u2500 integration/         # Integration tests\n\u2502   \u2514\u2500\u2500 fuzz/                # Fuzz tests (Hypothesis)\n\u251c\u2500\u2500 docs/                    # Documentation\n\u2514\u2500\u2500 pyproject.toml           # Project configuration\n</code></pre>"},{"location":"CONTRIBUTING/#development-workflow","title":"Development Workflow","text":""},{"location":"CONTRIBUTING/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nuv run pytest\n\n# Run with coverage\nuv run pytest --cov=src/bugsafe --cov-report=term-missing\n\n# Run specific test file\nuv run pytest tests/unit/test_patterns.py\n\n# Run with verbose output\nuv run pytest -v\n\n# Run property tests only\nuv run pytest tests/unit/test_redact_properties.py\n</code></pre>"},{"location":"CONTRIBUTING/#linting-and-type-checking","title":"Linting and Type Checking","text":"<pre><code># Type checking with mypy\nuv run mypy src/\n\n# Linting with ruff\nuv run ruff check src/\n\n# Auto-fix linting issues\nuv run ruff check src/ --fix\n\n# Format code\nuv run ruff format src/\n</code></pre>"},{"location":"CONTRIBUTING/#security-scanning","title":"Security Scanning","text":"<pre><code># Run bandit security scanner\nuv run bandit -r src/bugsafe -ll\n</code></pre>"},{"location":"CONTRIBUTING/#running-the-cli-locally","title":"Running the CLI Locally","text":"<pre><code># Run CLI commands\nuv run bugsafe --help\nuv run bugsafe run -- python -c \"print('hello')\"\nuv run bugsafe inspect bug.bugbundle\n</code></pre>"},{"location":"CONTRIBUTING/#code-style","title":"Code Style","text":""},{"location":"CONTRIBUTING/#general-guidelines","title":"General Guidelines","text":"<ul> <li>Follow PEP 8 style guide</li> <li>Use type hints for all function signatures</li> <li>Keep functions focused (single responsibility)</li> <li>Write docstrings for public functions and classes</li> <li>Maximum line length: 88 characters (ruff default)</li> </ul>"},{"location":"CONTRIBUTING/#imports","title":"Imports","text":"<pre><code># Standard library\nfrom __future__ import annotations\n\nimport os\nfrom dataclasses import dataclass\nfrom pathlib import Path\nfrom typing import Any\n\n# Third-party\nimport typer\nfrom pydantic import BaseModel\n\n# Local\nfrom bugsafe.redact.patterns import Pattern\n</code></pre>"},{"location":"CONTRIBUTING/#type-hints","title":"Type Hints","text":"<pre><code># Good\ndef process_text(text: str, max_length: int = 1000) -&gt; str:\n    ...\n\n# Good - use | for unions (Python 3.10+)\ndef get_value(key: str) -&gt; str | None:\n    ...\n\n# Good - use Annotated for CLI\ndef command(\n    path: Annotated[Path, typer.Argument(help=\"File path\")],\n) -&gt; None:\n    ...\n</code></pre>"},{"location":"CONTRIBUTING/#dataclasses-and-pydantic","title":"Dataclasses and Pydantic","text":"<pre><code># Use dataclasses for internal data structures\n@dataclass\nclass CaptureResult:\n    stdout: str\n    stderr: str\n    exit_code: int\n\n# Use Pydantic for serialized data (JSON/bundles)\nclass BundleMetadata(BaseModel):\n    version: str = \"1.0\"\n    created_at: datetime = Field(default_factory=datetime.utcnow)\n</code></pre>"},{"location":"CONTRIBUTING/#adding-new-features","title":"Adding New Features","text":""},{"location":"CONTRIBUTING/#adding-a-new-redaction-pattern","title":"Adding a New Redaction Pattern","text":"<ol> <li>Add the pattern to <code>src/bugsafe/redact/patterns.py</code>:</li> </ol> <pre><code>Pattern(\n    name=\"my_new_pattern\",\n    regex=r\"MY_PREFIX_[A-Z0-9]{32}\",\n    category=SecretCategory.API_KEY,\n    priority=Priority.HIGH,\n    description=\"My New Service API Key\",\n)\n</code></pre> <ol> <li>Add tests in <code>tests/unit/test_patterns.py</code>:</li> </ol> <pre><code>def test_my_new_pattern_matches():\n    pattern = get_pattern(\"my_new_pattern\")\n    assert pattern.matches(\"MY_PREFIX_ABCD1234567890ABCD1234567890AB\")\n</code></pre> <ol> <li>Update <code>docs/PATTERNS.md</code> with the new pattern.</li> </ol>"},{"location":"CONTRIBUTING/#adding-a-new-cli-command","title":"Adding a New CLI Command","text":"<ol> <li>Add the command to <code>src/bugsafe/cli.py</code>:</li> </ol> <pre><code>@app.command()\ndef my_command(\n    arg: Annotated[str, typer.Argument(help=\"Description\")],\n) -&gt; None:\n    \"\"\"Command description.\"\"\"\n    ...\n</code></pre> <ol> <li> <p>Add integration tests in <code>tests/integration/test_cli.py</code>.</p> </li> <li> <p>Update <code>README.md</code> CLI reference.</p> </li> </ol>"},{"location":"CONTRIBUTING/#testing-guidelines","title":"Testing Guidelines","text":""},{"location":"CONTRIBUTING/#unit-tests","title":"Unit Tests","text":"<ul> <li>Test one thing per test function</li> <li>Use descriptive test names: <code>test_&lt;what&gt;_&lt;condition&gt;_&lt;expected&gt;</code></li> <li>Use fixtures for common setup</li> </ul> <pre><code>def test_redaction_removes_aws_key():\n    engine = create_redaction_engine()\n    text = \"key: AKIAIOSFODNN7EXAMPLE\"\n    result, _ = engine.redact(text)\n    assert \"AKIAIOSFODNN7EXAMPLE\" not in result\n</code></pre>"},{"location":"CONTRIBUTING/#property-tests-hypothesis","title":"Property Tests (Hypothesis)","text":"<ul> <li>Use for testing invariants</li> <li>Good for redaction safety properties</li> </ul> <pre><code>@given(st.text(max_size=1000))\ndef test_redaction_is_idempotent(text: str):\n    engine = create_redaction_engine()\n    r1, _ = engine.redact(text)\n    r2, _ = engine.redact(r1)\n    assert r1 == r2\n</code></pre>"},{"location":"CONTRIBUTING/#integration-tests","title":"Integration Tests","text":"<ul> <li>Test complete workflows</li> <li>Use <code>typer.testing.CliRunner</code> for CLI tests</li> </ul> <pre><code>def test_run_and_render_workflow(tmp_path):\n    runner = CliRunner()\n    bundle = tmp_path / \"test.bugbundle\"\n\n    # Run command\n    result = runner.invoke(app, [\"run\", \"-o\", str(bundle), \"echo\", \"hello\"])\n    assert result.exit_code == 0\n\n    # Render bundle\n    result = runner.invoke(app, [\"render\", str(bundle)])\n    assert \"# Bug Report\" in result.stdout\n</code></pre>"},{"location":"CONTRIBUTING/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Fork the repository</li> <li>Create a branch for your feature: <code>git checkout -b feature/my-feature</code></li> <li>Make changes following the code style guidelines</li> <li>Add tests for new functionality</li> <li>Run all checks:    <pre><code>uv run pytest\nuv run mypy src/\nuv run ruff check src/\n</code></pre></li> <li>Commit with a descriptive message</li> <li>Push to your fork</li> <li>Open a Pull Request with:</li> <li>Clear description of changes</li> <li>Link to any related issues</li> <li>Screenshots/examples if applicable</li> </ol>"},{"location":"CONTRIBUTING/#commit-messages","title":"Commit Messages","text":"<p>Follow Conventional Commits:</p> <pre><code>feat: add new redaction pattern for Stripe keys\nfix: handle empty traceback in parser\ndocs: update CLI reference in README\ntest: add property tests for tokenizer\nrefactor: simplify path anonymization logic\n</code></pre>"},{"location":"CONTRIBUTING/#release-process","title":"Release Process","text":"<p>Releases are fully automated via GitHub Actions when a tag is pushed. Version is derived from git tags using <code>uv-dynamic-versioning</code> \u2014 no manual version updates needed.</p>"},{"location":"CONTRIBUTING/#creating-a-release","title":"Creating a Release","text":"<pre><code># 1. Ensure you're on main with all changes committed\ngit checkout main\ngit pull origin main\n\n# 2. Verify tests pass locally\nuv run pytest tests/ -v\nuv run mypy src/\nuv run ruff check src/\n\n# 3. Create annotated tag (triggers release pipeline)\ngit tag -a v0.2.0 -m \"Release v0.2.0: Brief description of changes\"\n\n# 4. Push tag to trigger automation\ngit push origin v0.2.0\n</code></pre>"},{"location":"CONTRIBUTING/#what-happens-automatically","title":"What Happens Automatically","text":"<p>When you push a tag:</p> <ul> <li>\u2705 Tests and linting run</li> <li>\u2705 Package built with version from tag</li> <li>\u2705 Published to PyPI (stable) or TestPyPI (pre-release)</li> <li>\u2705 GitHub Release created with auto-generated notes</li> <li>\u2705 Documentation deployed with version</li> </ul>"},{"location":"CONTRIBUTING/#pre-release-testing","title":"Pre-release Testing","text":"<p>For release candidates (publishes to TestPyPI only):</p> <pre><code>git tag -a v0.2.0-rc1 -m \"Release candidate 1 for v0.2.0\"\ngit push origin v0.2.0-rc1\n</code></pre>"},{"location":"CONTRIBUTING/#version-format","title":"Version Format","text":"<p>Follow Semantic Versioning with <code>v</code> prefix:</p> Version Meaning <code>v0.1.0</code> Initial release <code>v0.1.1</code> Patch (bug fix) <code>v0.2.0</code> Minor (new feature, backward compatible) <code>v1.0.0</code> Major (breaking changes) <code>v0.2.0-rc1</code> Pre-release (TestPyPI only)"},{"location":"CONTRIBUTING/#hotfix-process","title":"Hotfix Process","text":"<p>For urgent production fixes:</p> <pre><code>git checkout main\ngit pull origin main\n# Make fix\ngit commit -m \"fix: critical issue description\"\ngit tag -a v0.1.1 -m \"Hotfix: Critical fix description\"\ngit push origin main v0.1.1\n</code></pre>"},{"location":"CONTRIBUTING/#getting-help","title":"Getting Help","text":"<ul> <li>Open an issue for bugs or feature requests</li> <li>Check existing issues before creating new ones</li> <li>Join discussions for questions</li> </ul>"},{"location":"CONTRIBUTING/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"PATTERNS/","title":"Redaction Patterns (Legacy)","text":"<p>Legacy Documentation</p> <p>This page has been superseded by the new documentation structure. See Redaction Patterns for the current version.</p>"},{"location":"PATTERNS/#redaction-patterns","title":"Redaction Patterns","text":"<p>This document describes all secret patterns that bugsafe detects and redacts.</p>"},{"location":"PATTERNS/#pattern-priorities","title":"Pattern Priorities","text":"<p>Patterns are organized by priority level:</p> Priority Value Description CRITICAL 100 Always redacted, highest confidence HIGH 80 Strong indicators of secrets MEDIUM 60 Likely secrets, some false positives possible LOW 40 Network/system info, configurable OPTIONAL 20 Personal info, off by default DISABLED 0 High false-positive rate, must enable explicitly"},{"location":"PATTERNS/#cloud-provider-keys","title":"Cloud Provider Keys","text":""},{"location":"PATTERNS/#aws","title":"AWS","text":"Pattern Priority Example <code>aws_access_key</code> CRITICAL <code>AKIAIOSFODNN7EXAMPLE</code> <code>aws_secret_key</code> CRITICAL <code>wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code> <p>Regex: <code>AKIA[A-Z0-9]{16}</code></p>"},{"location":"PATTERNS/#google-cloud","title":"Google Cloud","text":"Pattern Priority Example <code>gcp_api_key</code> HIGH <code>AIzaSyC...</code> <code>gcp_service_account</code> CRITICAL JSON with <code>\"type\": \"service_account\"</code>"},{"location":"PATTERNS/#azure","title":"Azure","text":"Pattern Priority Example <code>azure_storage_key</code> HIGH Base64 storage account keys <code>azure_connection_string</code> HIGH <code>DefaultEndpointsProtocol=...</code>"},{"location":"PATTERNS/#version-control-tokens","title":"Version Control Tokens","text":""},{"location":"PATTERNS/#github","title":"GitHub","text":"Pattern Priority Example <code>github_pat</code> CRITICAL <code>ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code> <code>github_oauth</code> CRITICAL <code>gho_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code> <code>github_app</code> CRITICAL <code>ghu_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code> <code>github_refresh</code> CRITICAL <code>ghr_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code> <p>Regex: <code>gh[pousr]_[A-Za-z0-9]{36}</code></p>"},{"location":"PATTERNS/#gitlab","title":"GitLab","text":"Pattern Priority Example <code>gitlab_pat</code> CRITICAL <code>glpat-xxxxxxxxxxxxxxxxxxxx</code> <code>gitlab_runner</code> HIGH <code>GR1348941...</code>"},{"location":"PATTERNS/#bitbucket","title":"Bitbucket","text":"Pattern Priority Example <code>bitbucket_app_password</code> HIGH App passwords in Basic Auth"},{"location":"PATTERNS/#communication-platforms","title":"Communication Platforms","text":""},{"location":"PATTERNS/#slack","title":"Slack","text":"Pattern Priority Example <code>slack_token</code> CRITICAL <code>xoxb-...</code>, <code>xoxp-...</code>, <code>xoxa-...</code> <code>slack_webhook</code> HIGH <code>https://hooks.slack.com/services/...</code> <p>Regex: <code>xox[bpas]-[A-Za-z0-9-]+</code></p>"},{"location":"PATTERNS/#discord","title":"Discord","text":"Pattern Priority Example <code>discord_token</code> CRITICAL Bot tokens, webhook URLs <code>discord_webhook</code> HIGH <code>https://discord.com/api/webhooks/...</code>"},{"location":"PATTERNS/#twilio","title":"Twilio","text":"Pattern Priority Example <code>twilio_api_key</code> HIGH <code>SK...</code> <code>twilio_auth_token</code> CRITICAL 32-character hex strings"},{"location":"PATTERNS/#payment-providers","title":"Payment Providers","text":""},{"location":"PATTERNS/#stripe","title":"Stripe","text":"Pattern Priority Example <code>stripe_secret</code> CRITICAL <code>sk_live_...</code>, <code>sk_test_...</code> <code>stripe_publishable</code> MEDIUM <code>pk_live_...</code>, <code>pk_test_...</code> <code>stripe_restricted</code> HIGH <code>rk_live_...</code>, <code>rk_test_...</code> <p>Regex: <code>[sr]k_(live|test)_[A-Za-z0-9]{24,}</code></p>"},{"location":"PATTERNS/#paypal","title":"PayPal","text":"Pattern Priority Example <code>paypal_client_id</code> HIGH Client IDs <code>paypal_secret</code> CRITICAL Client secrets"},{"location":"PATTERNS/#database-connection-strings","title":"Database Connection Strings","text":"Pattern Priority Example <code>postgres_url</code> HIGH <code>postgres://user:pass@host:5432/db</code> <code>mysql_url</code> HIGH <code>mysql://user:pass@host:3306/db</code> <code>mongodb_url</code> HIGH <code>mongodb://user:pass@host:27017/db</code> <code>redis_url</code> HIGH <code>redis://:password@host:6379/0</code> <p>Note: Passwords in connection strings are always redacted.</p>"},{"location":"PATTERNS/#authentication","title":"Authentication","text":""},{"location":"PATTERNS/#jwt-tokens","title":"JWT Tokens","text":"Pattern Priority Example <code>jwt</code> HIGH <code>eyJhbGciOiJIUzI1NiIs...</code> (3-part base64) <p>Regex: <code>eyJ[A-Za-z0-9_-]+\\.eyJ[A-Za-z0-9_-]+\\.[A-Za-z0-9_-]+</code></p>"},{"location":"PATTERNS/#oauthbearer","title":"OAuth/Bearer","text":"Pattern Priority Example <code>bearer_token</code> HIGH <code>Authorization: Bearer xxx...</code> <code>basic_auth</code> HIGH <code>Authorization: Basic xxx...</code>"},{"location":"PATTERNS/#api-keys-generic","title":"API Keys (Generic)","text":"Pattern Priority Example <code>api_key_generic</code> MEDIUM <code>api_key = \"sk_...\"</code>, <code>API_KEY: ...</code> <code>password_generic</code> MEDIUM <code>password = \"...\"</code>, <code>passwd: ...</code> <code>secret_generic</code> MEDIUM <code>secret = \"...\"</code>, <code>SECRET_KEY: ...</code>"},{"location":"PATTERNS/#cryptographic-keys","title":"Cryptographic Keys","text":""},{"location":"PATTERNS/#private-keys","title":"Private Keys","text":"Pattern Priority Example <code>private_key_rsa</code> CRITICAL <code>-----BEGIN RSA PRIVATE KEY-----</code> <code>private_key_dsa</code> CRITICAL <code>-----BEGIN DSA PRIVATE KEY-----</code> <code>private_key_ec</code> CRITICAL <code>-----BEGIN EC PRIVATE KEY-----</code> <code>private_key_openssh</code> CRITICAL <code>-----BEGIN OPENSSH PRIVATE KEY-----</code> <code>private_key_generic</code> CRITICAL <code>-----BEGIN PRIVATE KEY-----</code> <code>private_key_encrypted</code> CRITICAL <code>-----BEGIN ENCRYPTED PRIVATE KEY-----</code> <p>Note: The entire key block (header to footer) is redacted.</p>"},{"location":"PATTERNS/#network-information","title":"Network Information","text":""},{"location":"PATTERNS/#ip-addresses","title":"IP Addresses","text":"Pattern Priority Default <code>ip_private</code> LOW Enabled <code>ip_public</code> LOW Enabled <p>Private ranges: <code>10.x.x.x</code>, <code>172.16-31.x.x</code>, <code>192.168.x.x</code>, <code>127.x.x.x</code></p> <p>Configuration: <pre><code>[redaction]\nredact_ips = true  # or false to disable\n</code></pre></p>"},{"location":"PATTERNS/#personal-information","title":"Personal Information","text":""},{"location":"PATTERNS/#email-addresses","title":"Email Addresses","text":"Pattern Priority Default <code>email</code> OPTIONAL Enabled <p>Regex: <code>[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}</code></p> <p>Configuration: <pre><code>[redaction]\nredact_emails = true  # or false to disable\n</code></pre></p>"},{"location":"PATTERNS/#uuids","title":"UUIDs","text":"Pattern Priority Default <code>uuid</code> DISABLED Disabled <p>Regex: <code>[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}</code></p> <p>Note: UUIDs have high false-positive rate. Enable explicitly: <pre><code>[redaction]\nredact_uuids = true\n</code></pre></p>"},{"location":"PATTERNS/#path-anonymization","title":"Path Anonymization","text":"<p>In addition to secret patterns, bugsafe anonymizes sensitive paths:</p> Original Replacement <code>/home/username/...</code> <code>&lt;USER&gt;/...</code> <code>/Users/username/...</code> <code>&lt;USER&gt;/...</code> <code>/tmp/...</code> <code>&lt;TMPDIR&gt;/...</code> <code>/var/folders/...</code> <code>&lt;TMPDIR&gt;/...</code> <code>.../site-packages/...</code> <code>&lt;SITE_PACKAGES&gt;/...</code> <code>.../.venv/...</code> <code>&lt;VENV&gt;/...</code>"},{"location":"PATTERNS/#token-format","title":"Token Format","text":"<p>When a secret is redacted, it's replaced with a token:</p> <pre><code>&lt;CATEGORY_N&gt;\n</code></pre> <p>Where: - <code>CATEGORY</code> is the secret type (e.g., <code>AWS_KEY</code>, <code>GITHUB_TOKEN</code>) - <code>N</code> is a sequential number for correlation</p> <p>Example: <pre><code>Original: API key is AKIAIOSFODNN7EXAMPLE, also AKIAIOSFODNN7EXAMPLE\nRedacted: API key is &lt;AWS_KEY_1&gt;, also &lt;AWS_KEY_1&gt;\n</code></pre></p> <p>The same secret always gets the same token within a bundle, enabling correlation.</p>"},{"location":"PATTERNS/#adding-custom-patterns","title":"Adding Custom Patterns","text":"<p>Custom patterns can be added via YAML configuration:</p> <pre><code># ~/.config/bugsafe/patterns.yaml\npatterns:\n  - name: my_internal_token\n    regex: \"MYCO_[A-Z0-9]{32}\"\n    category: INTERNAL_TOKEN\n    priority: high\n    description: \"My Company Internal Token\"\n</code></pre> <p>Then reference in config: <pre><code>[redaction]\ncustom_patterns = \"~/.config/bugsafe/patterns.yaml\"\n</code></pre></p>"},{"location":"PATTERNS/#pattern-testing","title":"Pattern Testing","text":"<p>Test patterns against sample text:</p> <pre><code>from bugsafe.redact.engine import create_redaction_engine\n\nengine = create_redaction_engine()\ntext = \"My key is AKIAIOSFODNN7EXAMPLE\"\nresult, report = engine.redact(text)\n\nprint(result)  # \"My key is &lt;AWS_KEY_1&gt;\"\nprint(report.categories)  # {\"AWS_KEY\": 1}\n</code></pre>"},{"location":"PATTERNS/#false-positives","title":"False Positives","text":"<p>Some patterns may occasionally match non-secrets. Strategies:</p> <ol> <li>Review output \u2014 Always check bundles before sharing</li> <li>Adjust priority \u2014 Lower priority patterns can be disabled</li> <li>Disable categories \u2014 Turn off emails, IPs, or UUIDs if needed</li> <li>Use <code>--no-redact</code> \u2014 Skip redaction entirely for trusted environments</li> </ol>"},{"location":"SECURITY/","title":"Security Model (Legacy)","text":"<p>Legacy Documentation</p> <p>This page has been superseded by the new documentation structure. See Security Model for the current version.</p>"},{"location":"SECURITY/#security-model","title":"Security Model","text":"<p>This document describes the security model, assumptions, and limitations of bugsafe.</p>"},{"location":"SECURITY/#overview","title":"Overview","text":"<p>bugsafe is designed to create safe-to-share crash bundles by automatically redacting sensitive information from command output. The goal is to enable developers to share debugging information without exposing secrets.</p>"},{"location":"SECURITY/#security-goals","title":"Security Goals","text":"<ol> <li>Prevent secret leakage - Remove API keys, tokens, passwords, and other sensitive data</li> <li>Preserve debugging utility - Keep enough information to diagnose issues</li> <li>Deterministic correlation - Same secret \u2192 same token for traceability</li> <li>Non-reversible - Cannot recover original secrets from tokens</li> </ol>"},{"location":"SECURITY/#threat-model","title":"Threat Model","text":""},{"location":"SECURITY/#in-scope","title":"In Scope","text":"Threat Mitigation API keys in output Pattern matching for 25+ secret formats Database credentials Connection string patterns Private keys PEM header/footer detection Email addresses Email pattern matching (configurable) IP addresses IPv4/IPv6 patterns (configurable) File paths Path anonymization (home, user, temp dirs) Environment variables Blocklist of sensitive variables"},{"location":"SECURITY/#out-of-scope","title":"Out of Scope","text":"Threat Reason Custom secret formats Users must add custom patterns Secrets in binary data Only text is processed Side-channel attacks Not designed for adversarial use Encrypted secrets Cannot detect encrypted data"},{"location":"SECURITY/#security-architecture","title":"Security Architecture","text":""},{"location":"SECURITY/#redaction-pipeline","title":"Redaction Pipeline","text":"<pre><code>Input Text\n    \u2502\n    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Pattern Matching\u2502 \u2190 25+ regex patterns\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Tokenization   \u2502 \u2190 Deterministic, salted\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Path Anonymizer \u2502 \u2190 Replace sensitive paths\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Verification   \u2502 \u2190 Check for remaining secrets\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n   Redacted Output\n</code></pre>"},{"location":"SECURITY/#salt-handling","title":"Salt Handling","text":"<ul> <li>Each redaction session uses a cryptographically random salt</li> <li>Only the SHA-256 hash of the salt is stored in the bundle</li> <li>The salt itself is never persisted</li> <li>Same salt = same tokens (for correlation within a bundle)</li> </ul>"},{"location":"SECURITY/#pattern-priorities","title":"Pattern Priorities","text":"Priority Category Examples CRITICAL Private keys, credentials PEM keys, passwords HIGH API keys, tokens AWS, GitHub, Slack tokens MEDIUM Generic secrets api_key=, password= patterns LOW Network info IP addresses OPTIONAL Personal info Email addresses DISABLED High false-positive UUIDs"},{"location":"SECURITY/#security-controls","title":"Security Controls","text":""},{"location":"SECURITY/#input-validation","title":"Input Validation","text":"<ul> <li>Command arguments passed directly (no shell interpretation)</li> <li>Bundle paths validated for traversal attacks</li> <li>ZIP entries checked for path traversal (<code>../</code>)</li> <li>Maximum file sizes enforced</li> </ul>"},{"location":"SECURITY/#output-sanitization","title":"Output Sanitization","text":"<ul> <li>All text output passes through redaction engine</li> <li>Environment variables filtered through blocklist</li> <li>File paths anonymized to remove usernames</li> </ul>"},{"location":"SECURITY/#timeout-protection","title":"Timeout Protection","text":"<ul> <li>Regex patterns have configurable timeout (default: 100ms)</li> <li>Prevents catastrophic backtracking DoS</li> <li>Timed-out patterns logged as warnings</li> </ul>"},{"location":"SECURITY/#limitations","title":"Limitations","text":""},{"location":"SECURITY/#false-negatives-missed-secrets","title":"False Negatives (Missed Secrets)","text":"<p>bugsafe may miss secrets in these cases:</p> <ol> <li>Custom formats - Proprietary token formats not in pattern list</li> <li>Obfuscated secrets - Base64-encoded or encrypted secrets</li> <li>Context-dependent - Secrets only identifiable by context</li> <li>New patterns - Recently introduced token formats</li> </ol> <p>Mitigation: Always review bundles before sharing. Use <code>bugsafe inspect</code> to check redaction summary.</p>"},{"location":"SECURITY/#false-positives","title":"False Positives","text":"<p>bugsafe may incorrectly redact:</p> <ol> <li>UUID-like IDs - Disabled by default</li> <li>Email-like strings - Configurable</li> <li>IP-like numbers - Configurable</li> <li>Long alphanumeric strings - May match generic patterns</li> </ol> <p>Mitigation: Use <code>--no-redact</code> for trusted environments or adjust pattern configuration.</p>"},{"location":"SECURITY/#security-checklist","title":"Security Checklist","text":"<p>Before sharing a bundle, verify:</p> <ul> <li>[ ] Run <code>bugsafe inspect &lt;bundle&gt;</code> to review redaction summary</li> <li>[ ] Check that expected secret categories were detected</li> <li>[ ] Review redacted output for any remaining sensitive data</li> <li>[ ] Consider audience before sharing (internal vs public)</li> </ul>"},{"location":"SECURITY/#incident-response","title":"Incident Response","text":"<p>If you discover a secret was not redacted:</p> <ol> <li>Delete the shared bundle immediately</li> <li>Rotate the exposed credential</li> <li>Report the pattern gap (see Contributing)</li> <li>Update your bugsafe version</li> </ol>"},{"location":"SECURITY/#reporting-security-issues","title":"Reporting Security Issues","text":"<p>Please report security vulnerabilities via:</p> <ol> <li>GitHub Security Advisories (preferred)</li> <li>Email to maintainers (for critical issues)</li> </ol> <p>Do NOT open public issues for security vulnerabilities.</p>"},{"location":"SECURITY/#compliance-notes","title":"Compliance Notes","text":"<ul> <li>bugsafe processes data locally; no external services</li> <li>No telemetry or data collection</li> <li>Bundles are self-contained files you control</li> <li>Salt hashes cannot be used to recover secrets</li> </ul>"},{"location":"SECURITY/#version-history","title":"Version History","text":"Version Security Changes 0.1.0 Initial security model"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"Unreleased","text":""},{"location":"changelog/#010-2026-01-08","title":"0.1.0 - 2026-01-08","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Initial release of bugsafe</li> <li>Capture Engine<ul> <li>Command execution with timeout support</li> <li>stdout/stderr capture with size limits</li> <li>Traceback parsing for Python exceptions</li> <li>Environment snapshot (Python version, packages, git info)</li> </ul> </li> <li>Redaction Engine<ul> <li>25+ secret patterns (AWS, GitHub, Stripe, etc.)</li> <li>Deterministic tokenization with correlation preservation</li> <li>Path anonymization (home directories, temp files)</li> <li>Configurable email/IP/UUID redaction</li> </ul> </li> <li>Bundle Format<ul> <li>ZIP-based <code>.bugbundle</code> format</li> <li>Pydantic schema validation</li> <li>Integrity verification with checksums</li> <li>Attachment support</li> </ul> </li> <li>Render Engine<ul> <li>Markdown output for humans</li> <li>JSON export for tools</li> <li>LLM-optimized context with token budgeting</li> </ul> </li> <li>CLI<ul> <li><code>bugsafe run</code> - Capture command execution</li> <li><code>bugsafe render</code> - Render bundles to Markdown/JSON</li> <li><code>bugsafe inspect</code> - View bundle metadata</li> <li><code>bugsafe config</code> - Manage configuration</li> </ul> </li> </ul>"},{"location":"changelog/#security","title":"Security","text":"<ul> <li>Automatic redaction of API keys, tokens, passwords</li> <li>Salt-based tokenization (only hash stored)</li> <li>Path traversal protection in bundle reader</li> <li>No shell=True in command execution</li> </ul>"},{"location":"concepts/bundle-format/","title":"Bundle Format","text":"<p>The <code>.bugbundle</code> format is a ZIP archive containing structured debugging information.</p>"},{"location":"concepts/bundle-format/#structure","title":"Structure","text":"<pre><code>example.bugbundle (ZIP)\n\u251c\u2500\u2500 manifest.json         # Bundle metadata\n\u251c\u2500\u2500 traceback.json        # Parsed exception\n\u251c\u2500\u2500 environment.json      # System information\n\u251c\u2500\u2500 output.txt            # Captured stdout/stderr\n\u251c\u2500\u2500 command.json          # Command details\n\u2514\u2500\u2500 attachments/          # Additional files\n    \u251c\u2500\u2500 config.yaml\n    \u2514\u2500\u2500 app.log\n</code></pre>"},{"location":"concepts/bundle-format/#manifest","title":"Manifest","text":"<p><code>manifest.json</code> contains:</p> <pre><code>{\n  \"version\": \"1.0\",\n  \"created_at\": \"2024-01-15T10:30:00Z\",\n  \"bugsafe_version\": \"0.1.0\",\n  \"redaction_salt_hash\": \"sha256:abc123...\",\n  \"checksums\": {\n    \"traceback.json\": \"sha256:...\",\n    \"environment.json\": \"sha256:...\"\n  }\n}\n</code></pre>"},{"location":"concepts/bundle-format/#traceback","title":"Traceback","text":"<p><code>traceback.json</code> contains parsed exception:</p> <pre><code>{\n  \"exception_type\": \"ConnectionError\",\n  \"exception_message\": \"Failed to connect to &lt;API_HOST_1&gt;\",\n  \"frames\": [\n    {\n      \"filename\": \"&lt;PROJECT&gt;/app.py\",\n      \"lineno\": 42,\n      \"function\": \"connect\",\n      \"code\": \"response = requests.get(url)\"\n    }\n  ]\n}\n</code></pre>"},{"location":"concepts/bundle-format/#environment","title":"Environment","text":"<p><code>environment.json</code> captures:</p> <pre><code>{\n  \"python_version\": \"3.12.0\",\n  \"platform\": \"linux\",\n  \"packages\": {\n    \"requests\": \"2.31.0\",\n    \"pydantic\": \"2.5.0\"\n  },\n  \"git\": {\n    \"branch\": \"main\",\n    \"commit\": \"abc123\",\n    \"dirty\": false\n  }\n}\n</code></pre>"},{"location":"concepts/bundle-format/#security","title":"Security","text":"<ul> <li>All content is redacted before storage</li> <li>Checksums verify integrity</li> <li>Salt hash enables verification without exposing secrets</li> </ul>"},{"location":"concepts/bundle-format/#reading-bundles","title":"Reading Bundles","text":"<pre><code>from bugsafe.bundle import BugBundle\n\nbundle = BugBundle.load(\"crash.bugbundle\")\nprint(bundle.traceback.exception_type)\nprint(bundle.environment.python_version)\n</code></pre>"},{"location":"concepts/bundle-format/#see-also","title":"See Also","text":"<ul> <li>API Reference</li> <li>How It Works</li> </ul>"},{"location":"concepts/how-it-works/","title":"How It Works","text":"<p>bugsafe creates safe-to-share crash bundles by capturing, redacting, and packaging debugging information.</p>"},{"location":"concepts/how-it-works/#pipeline-overview","title":"Pipeline Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Capture   \u2502 -&gt; \u2502   Redact    \u2502 -&gt; \u2502   Bundle    \u2502 -&gt; \u2502   Render    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"concepts/how-it-works/#1-capture","title":"1. Capture","text":"<p>When you run <code>bugsafe run -- python script.py</code>:</p> <ol> <li>Command execution \u2014 Spawns the command as a subprocess</li> <li>Output capture \u2014 Collects stdout and stderr</li> <li>Traceback parsing \u2014 Extracts Python exception details</li> <li>Environment snapshot \u2014 Captures Python version, packages, git info</li> </ol>"},{"location":"concepts/how-it-works/#2-redact","title":"2. Redact","text":"<p>Before storing anything:</p> <ol> <li>Pattern matching \u2014 Scans text for 25+ secret patterns</li> <li>Tokenization \u2014 Replaces secrets with deterministic tokens</li> <li>Path anonymization \u2014 Removes usernames from file paths</li> <li>Correlation preservation \u2014 Same secret = same token</li> </ol>"},{"location":"concepts/how-it-works/#3-bundle","title":"3. Bundle","text":"<p>Creates a <code>.bugbundle</code> file (ZIP format):</p> <pre><code>crash.bugbundle\n\u251c\u2500\u2500 manifest.json      # Metadata and checksums\n\u251c\u2500\u2500 traceback.json     # Parsed exception\n\u251c\u2500\u2500 environment.json   # System info\n\u251c\u2500\u2500 output.txt         # Captured stdout/stderr\n\u2514\u2500\u2500 attachments/       # Additional files\n</code></pre>"},{"location":"concepts/how-it-works/#4-render","title":"4. Render","text":"<p>Outputs the bundle in various formats:</p> <ul> <li>Markdown \u2014 Human-readable for GitHub issues</li> <li>JSON \u2014 Machine-readable for tools</li> <li>LLM Context \u2014 Token-optimized for AI assistants</li> </ul>"},{"location":"concepts/how-it-works/#key-principles","title":"Key Principles","text":""},{"location":"concepts/how-it-works/#privacy-by-default","title":"Privacy by Default","text":"<p>All sensitive data is redacted before storage. The original secrets are never written to disk.</p>"},{"location":"concepts/how-it-works/#correlation-preservation","title":"Correlation Preservation","text":"<p>The same secret produces the same token within a bundle:</p> <pre><code>API_KEY=sk-abc123 \u2192 &lt;API_KEY_1&gt;\nheaders={\"auth\": \"sk-abc123\"} \u2192 headers={\"auth\": \"&lt;API_KEY_1&gt;\"}\n</code></pre> <p>This helps debuggers understand relationships without exposing the actual values.</p>"},{"location":"concepts/how-it-works/#non-reversible","title":"Non-Reversible","text":"<p>Tokens cannot be reversed to the original value. Only a salted hash is stored for verification.</p>"},{"location":"concepts/how-it-works/#see-also","title":"See Also","text":"<ul> <li>Security Model</li> <li>Tokenization</li> <li>Bundle Format</li> </ul>"},{"location":"concepts/security-model/","title":"Security Model","text":"<p>bugsafe is designed with security as a primary concern. This document explains the threat model and security controls.</p>"},{"location":"concepts/security-model/#threat-model","title":"Threat Model","text":"Threat Mitigation API keys in output Pattern-based detection + tokenization Passwords in logs Password pattern matching Private keys PEM header detection Usernames in paths Path anonymization Correlation attacks Salted hashing per session"},{"location":"concepts/security-model/#security-controls","title":"Security Controls","text":""},{"location":"concepts/security-model/#1-pattern-based-redaction","title":"1. Pattern-Based Redaction","text":"<p>25+ patterns detect common secret formats:</p> <ul> <li>AWS keys (<code>AKIA...</code>)</li> <li>GitHub tokens (<code>ghp_...</code>)</li> <li>Stripe keys (<code>sk_live_...</code>)</li> <li>Private keys (<code>-----BEGIN...</code>)</li> <li>And more</li> </ul>"},{"location":"concepts/security-model/#2-deterministic-tokenization","title":"2. Deterministic Tokenization","text":"<p>Secrets are replaced with tokens like <code>&lt;API_KEY_1&gt;</code>:</p> <ul> <li>Same secret \u2192 same token (within bundle)</li> <li>Different sessions \u2192 different tokens</li> <li>Non-reversible (hash-based)</li> </ul>"},{"location":"concepts/security-model/#3-path-anonymization","title":"3. Path Anonymization","text":"<p>File paths are sanitized:</p> <pre><code>/Users/john/projects/app \u2192 &lt;PROJECT&gt;/app\n/home/john/.ssh \u2192 &lt;USER&gt;/.ssh\n</code></pre>"},{"location":"concepts/security-model/#4-salt-based-sessions","title":"4. Salt-Based Sessions","text":"<p>Each bundle uses a unique salt:</p> <ul> <li>Prevents cross-bundle correlation</li> <li>Only hash stored (original discarded)</li> <li>Salt hash in metadata for verification</li> </ul>"},{"location":"concepts/security-model/#what-is-not-redacted","title":"What Is NOT Redacted","text":"<ul> <li>Generic variable values (unless matching patterns)</li> <li>Application-specific secrets without known patterns</li> <li>Custom tokens (add via custom patterns)</li> </ul>"},{"location":"concepts/security-model/#recommendations","title":"Recommendations","text":"<ol> <li>Review before sharing \u2014 Always inspect bundles before sharing publicly</li> <li>Add custom patterns \u2014 For project-specific secrets</li> <li>Use configuration \u2014 Disable patterns you don't need</li> <li>CI integration \u2014 Add bugsafe to your test pipeline</li> </ol>"},{"location":"concepts/security-model/#limitations","title":"Limitations","text":"<ul> <li>Regex-based \u2014 Unknown formats may not be detected</li> <li>Context-free \u2014 Cannot understand semantic meaning</li> <li>Best-effort \u2014 Not a guarantee of complete redaction</li> </ul>"},{"location":"concepts/security-model/#see-also","title":"See Also","text":"<ul> <li>Redaction Patterns</li> <li>Custom Patterns</li> </ul>"},{"location":"concepts/tokenization/","title":"Tokenization","text":"<p>Tokenization is the process of replacing secrets with deterministic, non-reversible tokens.</p>"},{"location":"concepts/tokenization/#token-format","title":"Token Format","text":"<pre><code>&lt;CATEGORY_N&gt;\n</code></pre> <ul> <li>CATEGORY \u2014 Type of secret (e.g., <code>API_KEY</code>, <code>AWS_SECRET</code>)</li> <li>N \u2014 Occurrence number for correlation</li> </ul>"},{"location":"concepts/tokenization/#examples","title":"Examples","text":"Original Token <code>sk-abc123xyz</code> <code>&lt;API_KEY_1&gt;</code> <code>AKIA1234567890</code> <code>&lt;AWS_KEY_1&gt;</code> <code>ghp_xxxxxxxxxxxx</code> <code>&lt;GITHUB_TOKEN_1&gt;</code>"},{"location":"concepts/tokenization/#correlation-preservation","title":"Correlation Preservation","text":"<p>The same secret always produces the same token within a bundle:</p> <pre><code>Input:\n  API_KEY=sk-secret123\n  curl -H \"Authorization: Bearer sk-secret123\"\n\nOutput:\n  API_KEY=&lt;API_KEY_1&gt;\n  curl -H \"Authorization: Bearer &lt;API_KEY_1&gt;\"\n</code></pre> <p>This helps understand data flow without exposing values.</p>"},{"location":"concepts/tokenization/#how-it-works","title":"How It Works","text":"<pre><code>secret + salt \u2192 hash \u2192 token_id \u2192 &lt;CATEGORY_N&gt;\n</code></pre> <ol> <li>Salt \u2014 Unique per session, prevents cross-bundle correlation</li> <li>Hash \u2014 One-way transformation (SHA-256)</li> <li>Token ID \u2014 Incrementing counter per category</li> <li>Token \u2014 Human-readable placeholder</li> </ol>"},{"location":"concepts/tokenization/#security-properties","title":"Security Properties","text":"Property Guarantee Non-reversible Cannot recover original from token Deterministic Same input \u2192 same output (per session) Session-isolated Different sessions \u2192 different tokens Collision-resistant Different inputs \u2192 different tokens"},{"location":"concepts/tokenization/#api-usage","title":"API Usage","text":"<pre><code>from bugsafe.redact.tokenizer import Tokenizer\n\ntokenizer = Tokenizer()\n\n# Tokenize a secret\ntoken = tokenizer.tokenize(\"sk-abc123\", \"API_KEY\")\nprint(token)  # &lt;API_KEY_1&gt;\n\n# Same secret = same token\ntoken2 = tokenizer.tokenize(\"sk-abc123\", \"API_KEY\")\nassert token == token2\n\n# Check if string is a token\nassert tokenizer.is_token(\"&lt;API_KEY_1&gt;\")\n</code></pre>"},{"location":"concepts/tokenization/#see-also","title":"See Also","text":"<ul> <li>Security Model</li> <li>Redaction Patterns</li> </ul>"},{"location":"contributing/code-style/","title":"Code Style","text":"<p>Guidelines for writing consistent, maintainable code.</p>"},{"location":"contributing/code-style/#formatting","title":"Formatting","text":"<p>We use Ruff for formatting:</p> <pre><code># Format code\nuv run ruff format src/\n\n# Check formatting\nuv run ruff format --check src/\n</code></pre>"},{"location":"contributing/code-style/#linting","title":"Linting","text":"<pre><code># Run linter\nuv run ruff check src/\n\n# Auto-fix issues\nuv run ruff check --fix src/\n</code></pre>"},{"location":"contributing/code-style/#type-checking","title":"Type Checking","text":"<p>We use mypy with strict mode:</p> <pre><code>uv run mypy src/\n</code></pre> <p>All public functions must have type annotations.</p>"},{"location":"contributing/code-style/#docstrings","title":"Docstrings","text":"<p>Use Google-style docstrings:</p> <pre><code>def redact(text: str, patterns: list[Pattern]) -&gt; tuple[str, Report]:\n    \"\"\"Redact sensitive information from text.\n\n    Args:\n        text: The text to redact.\n        patterns: List of patterns to apply.\n\n    Returns:\n        Tuple of (redacted_text, report).\n\n    Raises:\n        RedactionError: If redaction fails.\n    \"\"\"\n</code></pre>"},{"location":"contributing/code-style/#naming-conventions","title":"Naming Conventions","text":"Type Convention Example Classes PascalCase <code>RedactionEngine</code> Functions snake_case <code>create_bundle</code> Constants UPPER_SNAKE <code>DEFAULT_TIMEOUT</code> Private _prefix <code>_internal_method</code>"},{"location":"contributing/code-style/#imports","title":"Imports","text":"<p>Use <code>ruff</code> to sort imports:</p> <pre><code># Standard library\nimport os\nfrom pathlib import Path\n\n# Third-party\nimport typer\nfrom pydantic import BaseModel\n\n# Local\nfrom bugsafe.redact import RedactionEngine\n</code></pre>"},{"location":"contributing/code-style/#error-handling","title":"Error Handling","text":"<ul> <li>Use specific exception types</li> <li>Provide helpful error messages</li> <li>Log warnings for non-fatal issues</li> </ul> <pre><code>class RedactionError(Exception):\n    \"\"\"Raised when redaction fails.\"\"\"\n\ndef redact(text: str) -&gt; str:\n    if not text:\n        raise RedactionError(\"Cannot redact empty text\")\n</code></pre>"},{"location":"contributing/code-style/#testing","title":"Testing","text":"<p>Every new feature needs tests. See Testing.</p>"},{"location":"contributing/code-style/#see-also","title":"See Also","text":"<ul> <li>Development Setup</li> <li>Testing</li> </ul>"},{"location":"contributing/development-setup/","title":"Development Setup","text":"<p>Set up your development environment for contributing to bugsafe.</p>"},{"location":"contributing/development-setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Git</li> <li>uv (recommended) or pip</li> </ul>"},{"location":"contributing/development-setup/#clone-the-repository","title":"Clone the Repository","text":"<pre><code>git clone https://github.com/matbmeijer/bugsafe.git\ncd bugsafe\n</code></pre>"},{"location":"contributing/development-setup/#install-dependencies","title":"Install Dependencies","text":"<pre><code># With uv (recommended)\nuv sync --all-extras\n\n# With pip\npip install -e \".[dev]\"\n</code></pre>"},{"location":"contributing/development-setup/#verify-installation","title":"Verify Installation","text":"<pre><code># Run tests\nuv run pytest tests/ -v\n\n# Run linters\nuv run mypy src/\nuv run ruff check src/\n\n# Run the CLI\nuv run bugsafe --version\n</code></pre>"},{"location":"contributing/development-setup/#ide-setup","title":"IDE Setup","text":""},{"location":"contributing/development-setup/#vs-code","title":"VS Code","text":"<p>Recommended extensions:</p> <ul> <li>Python</li> <li>Pylance</li> <li>Ruff</li> </ul> <p>Settings (<code>.vscode/settings.json</code>):</p> <pre><code>{\n  \"python.defaultInterpreterPath\": \".venv/bin/python\",\n  \"python.analysis.typeCheckingMode\": \"strict\",\n  \"ruff.enable\": true\n}\n</code></pre>"},{"location":"contributing/development-setup/#pycharm","title":"PyCharm","text":"<ol> <li>Set interpreter to <code>.venv/bin/python</code></li> <li>Enable Ruff plugin</li> <li>Enable mypy integration</li> </ol>"},{"location":"contributing/development-setup/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<pre><code>uv run pre-commit install\n</code></pre> <p>This runs linting on every commit.</p>"},{"location":"contributing/development-setup/#project-structure","title":"Project Structure","text":"<pre><code>bugsafe/\n\u251c\u2500\u2500 src/bugsafe/        # Source code\n\u2502   \u251c\u2500\u2500 capture/        # Command execution\n\u2502   \u251c\u2500\u2500 redact/         # Secret redaction\n\u2502   \u251c\u2500\u2500 bundle/         # Bundle format\n\u2502   \u251c\u2500\u2500 render/         # Output rendering\n\u2502   \u2514\u2500\u2500 cli.py          # CLI entry point\n\u251c\u2500\u2500 tests/              # Test suite\n\u2502   \u251c\u2500\u2500 unit/\n\u2502   \u251c\u2500\u2500 integration/\n\u2502   \u2514\u2500\u2500 property/\n\u251c\u2500\u2500 docs/               # Documentation\n\u2514\u2500\u2500 pyproject.toml      # Project config\n</code></pre>"},{"location":"contributing/development-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Code Style</li> <li>Testing</li> <li>Release Process</li> </ul>"},{"location":"contributing/release-process/","title":"Release Process","text":"<p>How releases are created and published.</p>"},{"location":"contributing/release-process/#branching-strategy-gitflow","title":"Branching Strategy (Gitflow)","text":"<p>We follow Gitflow:</p> <pre><code>main \u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (production releases)\n          \u2502        \u2191        \u2191\n          \u2502        \u2502        \u2502\ndevelop \u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (integration branch)\n               \u2502        \u2502\n               \u2502        \u2514\u2500\u2500 feature/new-pattern\n               \u2514\u2500\u2500 feature/llm-output\n</code></pre> Branch Purpose <code>main</code> Production-ready code, tagged releases <code>develop</code> Integration branch for features <code>feature/*</code> New features (branch from <code>develop</code>) <code>hotfix/*</code> Urgent fixes (branch from <code>main</code>) <code>release/*</code> Release preparation (optional)"},{"location":"contributing/release-process/#feature-development","title":"Feature Development","text":"<pre><code># Start a feature\ngit checkout develop\ngit checkout -b feature/my-feature\n\n# Work on feature...\ngit commit -m \"feat: add feature\"\n\n# Merge back to develop (via PR)\ngit checkout develop\ngit merge feature/my-feature\n</code></pre>"},{"location":"contributing/release-process/#release-flow","title":"Release Flow","text":"<pre><code># Prepare release from develop\ngit checkout main\ngit merge develop\ngit tag -a v0.2.0 -m \"Release v0.2.0\"\ngit push origin main v0.2.0\n\n# Sync develop with main\ngit checkout develop\ngit merge main\n</code></pre>"},{"location":"contributing/release-process/#overview","title":"Overview","text":"<p>Releases are fully automated via GitHub Actions when a tag is pushed.</p>"},{"location":"contributing/release-process/#creating-a-release","title":"Creating a Release","text":"<pre><code># 1. Ensure you're on main with latest changes\ngit checkout main\ngit pull origin main\n\n# 2. Verify tests pass\nuv run pytest tests/ -v\nuv run mypy src/\nuv run ruff check src/\n\n# 3. Create annotated tag\ngit tag -a v0.2.0 -m \"Release v0.2.0: Brief description\"\n\n# 4. Push tag (triggers automation)\ngit push origin v0.2.0\n</code></pre>"},{"location":"contributing/release-process/#what-happens-automatically","title":"What Happens Automatically","text":"<p>When a tag is pushed:</p> <ol> <li>\u2705 Tests run on multiple Python versions</li> <li>\u2705 Package built with version from tag</li> <li>\u2705 Published to PyPI</li> <li>\u2705 GitHub Release created</li> <li>\u2705 Documentation deployed</li> </ol>"},{"location":"contributing/release-process/#version-format","title":"Version Format","text":"<p>Follow Semantic Versioning:</p> Version When to Use <code>v0.1.1</code> Bug fixes only <code>v0.2.0</code> New features (backward compatible) <code>v1.0.0</code> Breaking changes <code>v0.2.0-rc1</code> Pre-release (TestPyPI only)"},{"location":"contributing/release-process/#pre-release-testing","title":"Pre-release Testing","text":"<p>Test on TestPyPI before stable release:</p> <pre><code>git tag -a v0.2.0-rc1 -m \"Release candidate 1\"\ngit push origin v0.2.0-rc1\n</code></pre> <p>This publishes to TestPyPI only.</p>"},{"location":"contributing/release-process/#hotfix-process","title":"Hotfix Process","text":"<p>For urgent fixes:</p> <pre><code>git checkout main\ngit commit -m \"fix: critical issue\"\ngit tag -a v0.1.1 -m \"Hotfix: Fix description\"\ngit push origin main v0.1.1\n</code></pre>"},{"location":"contributing/release-process/#commit-messages","title":"Commit Messages","text":"<p>Use Conventional Commits:</p> <pre><code>feat: add new redaction pattern\nfix: handle empty traceback\ndocs: update CLI reference\ntest: add property tests\n</code></pre>"},{"location":"contributing/release-process/#see-also","title":"See Also","text":"<ul> <li>Development Setup</li> <li>Testing</li> </ul>"},{"location":"contributing/testing/","title":"Testing","text":"<p>Guidelines for testing bugsafe code.</p>"},{"location":"contributing/testing/#running-tests","title":"Running Tests","text":"<pre><code># All tests\nuv run pytest tests/ -v\n\n# Specific test file\nuv run pytest tests/unit/test_engine.py -v\n\n# With coverage\nuv run pytest tests/ --cov=src/bugsafe --cov-report=html\n</code></pre>"},{"location":"contributing/testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 unit/              # Unit tests\n\u2502   \u251c\u2500\u2500 test_engine.py\n\u2502   \u251c\u2500\u2500 test_patterns.py\n\u2502   \u2514\u2500\u2500 test_tokenizer.py\n\u251c\u2500\u2500 integration/       # Integration tests\n\u2502   \u2514\u2500\u2500 test_cli.py\n\u2514\u2500\u2500 property/          # Property-based tests\n    \u2514\u2500\u2500 test_redaction_properties.py\n</code></pre>"},{"location":"contributing/testing/#writing-unit-tests","title":"Writing Unit Tests","text":"<pre><code>import pytest\nfrom bugsafe.redact import create_redaction_engine\n\nclass TestRedactionEngine:\n    def test_redacts_api_key(self):\n        engine = create_redaction_engine()\n        text = \"API_KEY=sk-abc123xyz\"\n\n        result, report = engine.redact(text)\n\n        assert \"sk-abc123\" not in result\n        assert \"&lt;API_KEY_\" in result\n        assert report.get_total() == 1\n</code></pre>"},{"location":"contributing/testing/#property-based-tests","title":"Property-Based Tests","text":"<p>We use Hypothesis for property testing:</p> <pre><code>from hypothesis import given, strategies as st\n\n@given(st.text())\ndef test_redaction_is_idempotent(text):\n    engine = create_redaction_engine()\n    result1, _ = engine.redact(text)\n    result2, _ = engine.redact(result1)\n    assert result1 == result2\n</code></pre>"},{"location":"contributing/testing/#test-categories","title":"Test Categories","text":""},{"location":"contributing/testing/#security-tests","title":"Security Tests","text":"<p>Ensure secrets are properly redacted:</p> <pre><code>def test_aws_key_redacted():\n    engine = create_redaction_engine()\n    text = \"AKIAIOSFODNN7EXAMPLE\"\n    result, _ = engine.redact(text)\n    assert \"AKIA\" not in result\n</code></pre>"},{"location":"contributing/testing/#edge-cases","title":"Edge Cases","text":"<p>Test boundary conditions:</p> <pre><code>def test_empty_input():\n    engine = create_redaction_engine()\n    result, report = engine.redact(\"\")\n    assert result == \"\"\n    assert report.get_total() == 0\n</code></pre>"},{"location":"contributing/testing/#coverage-requirements","title":"Coverage Requirements","text":"<ul> <li>Minimum: 80% coverage</li> <li>New features: Must have tests</li> <li>Security code: 100% coverage</li> </ul>"},{"location":"contributing/testing/#continuous-integration","title":"Continuous Integration","text":"<p>Tests run automatically on:</p> <ul> <li>Push to <code>main</code>/<code>develop</code></li> <li>Pull requests</li> <li>Multiple Python versions (3.10-3.13)</li> <li>Multiple OS (Linux, macOS, Windows)</li> </ul>"},{"location":"contributing/testing/#see-also","title":"See Also","text":"<ul> <li>Development Setup</li> <li>Code Style</li> </ul>"},{"location":"getting-started/first-bundle/","title":"Your First Bundle","text":"<p>This tutorial walks you through creating, inspecting, and sharing your first bug bundle.</p>"},{"location":"getting-started/first-bundle/#prerequisites","title":"Prerequisites","text":"<ul> <li>bugsafe installed (<code>pip install bugsafe</code>)</li> <li>A Python script that produces an error</li> </ul>"},{"location":"getting-started/first-bundle/#step-1-create-a-failing-script","title":"Step 1: Create a Failing Script","text":"<p>Create a file <code>demo.py</code>:</p> <pre><code>import os\n\ndef connect_to_api():\n    api_key = os.environ.get(\"API_KEY\", \"sk-test-abc123xyz789\")\n    print(f\"Connecting with key: {api_key}\")\n    raise ConnectionError(\"Failed to connect to API\")\n\nif __name__ == \"__main__\":\n    connect_to_api()\n</code></pre>"},{"location":"getting-started/first-bundle/#step-2-capture-the-crash","title":"Step 2: Capture the Crash","text":"<pre><code>bugsafe run -- python demo.py\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce6 Bundle created: demo_20240115_143022.bugbundle\n   Redacted: 1 secret (API_KEY_1)\n</code></pre>"},{"location":"getting-started/first-bundle/#step-3-inspect-the-bundle","title":"Step 3: Inspect the Bundle","text":"<pre><code>bugsafe inspect demo_20240115_143022.bugbundle\n</code></pre> <p>Notice how the API key has been replaced with <code>&lt;API_KEY_1&gt;</code>.</p>"},{"location":"getting-started/first-bundle/#step-4-render-for-sharing","title":"Step 4: Render for Sharing","text":"<pre><code>bugsafe render demo_20240115_143022.bugbundle\n</code></pre> <p>The output is safe to paste in GitHub issues, Slack, or send to an LLM.</p>"},{"location":"getting-started/first-bundle/#what-was-redacted","title":"What Was Redacted?","text":"<p>bugsafe automatically detected and replaced:</p> <ul> <li>The API key <code>sk-test-abc123xyz789</code> \u2192 <code>&lt;API_KEY_1&gt;</code></li> <li>Any matching secrets in environment variables</li> <li>Sensitive file paths</li> </ul>"},{"location":"getting-started/first-bundle/#next-steps","title":"Next Steps","text":"<ul> <li>Custom Patterns \u2014 Add your own redaction rules</li> <li>LLM Integration \u2014 Optimize output for AI assistants</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> <li>pip or uv package manager</li> </ul>"},{"location":"getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"pipuv <pre><code>pip install bugsafe\n</code></pre> <pre><code>uv add bugsafe\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>bugsafe --version\n</code></pre>"},{"location":"getting-started/installation/#development-installation","title":"Development Installation","text":"<p>For contributors, see the Development Setup guide.</p>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get up and running with bugsafe in 5 minutes.</p>"},{"location":"getting-started/quickstart/#capture-a-crash","title":"Capture a Crash","text":"<p>Run any Python command through bugsafe to capture its output:</p> <pre><code>bugsafe run -- python my_script.py\n</code></pre> <p>This creates a <code>.bugbundle</code> file containing:</p> <ul> <li>Captured stdout/stderr</li> <li>Parsed traceback</li> <li>Environment info (Python version, packages, git info)</li> <li>All secrets automatically redacted</li> </ul>"},{"location":"getting-started/quickstart/#inspect-the-bundle","title":"Inspect the Bundle","text":"<pre><code>bugsafe inspect crash.bugbundle\n</code></pre>"},{"location":"getting-started/quickstart/#render-for-sharing","title":"Render for Sharing","text":"<pre><code># Markdown for humans\nbugsafe render crash.bugbundle\n\n# JSON for tools\nbugsafe render crash.bugbundle --format json\n\n# Optimized for LLMs\nbugsafe render crash.bugbundle --llm\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Your First Bundle \u2014 Detailed walkthrough</li> <li>CLI Usage \u2014 Full CLI reference</li> <li>Redaction Patterns \u2014 What gets redacted</li> </ul>"},{"location":"guides/ci-cd-integration/","title":"CI/CD Integration","text":"<p>Use bugsafe in your continuous integration pipelines.</p>"},{"location":"guides/ci-cd-integration/#github-actions","title":"GitHub Actions","text":"<pre><code>name: Tests with Crash Capture\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Python\n        uses: actions/setup-python@v5\n        with:\n          python-version: \"3.12\"\n\n      - name: Install dependencies\n        run: |\n          pip install bugsafe\n          pip install -e .\n\n      - name: Run tests with bugsafe\n        run: bugsafe run -o crash.bugbundle -- pytest tests/\n        continue-on-error: true\n\n      - name: Upload crash bundle\n        if: failure()\n        uses: actions/upload-artifact@v4\n        with:\n          name: crash-bundle\n          path: crash.bugbundle\n</code></pre>"},{"location":"guides/ci-cd-integration/#gitlab-ci","title":"GitLab CI","text":"<pre><code>test:\n  script:\n    - pip install bugsafe\n    - bugsafe run -o crash.bugbundle -- pytest tests/\n  artifacts:\n    when: on_failure\n    paths:\n      - crash.bugbundle\n</code></pre>"},{"location":"guides/ci-cd-integration/#best-practices","title":"Best Practices","text":""},{"location":"guides/ci-cd-integration/#1-capture-only-on-failure","title":"1. Capture Only on Failure","text":"<p>Use <code>continue-on-error</code> and conditional upload to avoid storing bundles for passing tests.</p>"},{"location":"guides/ci-cd-integration/#2-set-timeouts","title":"2. Set Timeouts","text":"<p>Prevent hanging tests from blocking CI:</p> <pre><code>bugsafe run -t 300 -- pytest tests/\n</code></pre>"},{"location":"guides/ci-cd-integration/#3-attach-logs","title":"3. Attach Logs","text":"<p>Include relevant log files in the bundle:</p> <pre><code>bugsafe run -a app.log -a /tmp/debug.log -- pytest tests/\n</code></pre>"},{"location":"guides/ci-cd-integration/#4-redaction-verification","title":"4. Redaction Verification","text":"<p>The bundle automatically redacts secrets, but verify in sensitive environments:</p> <pre><code>bugsafe inspect crash.bugbundle\n</code></pre>"},{"location":"guides/ci-cd-integration/#next-steps","title":"Next Steps","text":"<ul> <li>CLI Usage \u2014 Full command reference</li> <li>Security Model \u2014 How redaction works</li> </ul>"},{"location":"guides/cli-usage/","title":"CLI Usage","text":"<p>Comprehensive guide to using the bugsafe command-line interface.</p>"},{"location":"guides/cli-usage/#commands-overview","title":"Commands Overview","text":"Command Description <code>bugsafe run</code> Capture command execution and create a bundle <code>bugsafe render</code> Render a bundle to Markdown, JSON, or LLM context <code>bugsafe inspect</code> View bundle metadata and summary <code>bugsafe config</code> Manage configuration"},{"location":"guides/cli-usage/#bugsafe-run","title":"bugsafe run","text":"<p>Capture a command's output and create a redacted bundle.</p> <pre><code>bugsafe run [OPTIONS] -- COMMAND [ARGS]...\n</code></pre>"},{"location":"guides/cli-usage/#options","title":"Options","text":"Option Description <code>-o, --output PATH</code> Output bundle path <code>-t, --timeout SECONDS</code> Command timeout (default: no timeout) <code>-a, --attach PATH</code> Attach additional files <code>--no-redact</code> Disable redaction (not recommended)"},{"location":"guides/cli-usage/#examples","title":"Examples","text":"<pre><code># Basic usage\nbugsafe run -- python my_script.py\n\n# With output path\nbugsafe run -o crash.bugbundle -- python my_script.py\n\n# With timeout\nbugsafe run -t 60 -- python long_running.py\n\n# Attach log files\nbugsafe run -a app.log -a config.yaml -- python my_script.py\n</code></pre>"},{"location":"guides/cli-usage/#bugsafe-render","title":"bugsafe render","text":"<p>Render a bundle in different formats.</p> <pre><code>bugsafe render [OPTIONS] BUNDLE_PATH\n</code></pre>"},{"location":"guides/cli-usage/#options_1","title":"Options","text":"Option Description <code>-f, --format FORMAT</code> Output format: <code>markdown</code>, <code>json</code> <code>--llm</code> Optimize for LLM context <code>-o, --output PATH</code> Write to file instead of stdout"},{"location":"guides/cli-usage/#examples_1","title":"Examples","text":"<pre><code># Markdown output (default)\nbugsafe render crash.bugbundle\n\n# JSON output\nbugsafe render crash.bugbundle --format json\n\n# LLM-optimized\nbugsafe render crash.bugbundle --llm\n\n# Save to file\nbugsafe render crash.bugbundle -o report.md\n</code></pre>"},{"location":"guides/cli-usage/#bugsafe-inspect","title":"bugsafe inspect","text":"<p>View bundle metadata without full rendering.</p> <pre><code>bugsafe inspect BUNDLE_PATH\n</code></pre>"},{"location":"guides/cli-usage/#bugsafe-config","title":"bugsafe config","text":"<p>Manage bugsafe configuration.</p> <pre><code># Show current config\nbugsafe config show\n\n# Set a value\nbugsafe config set key value\n</code></pre>"},{"location":"guides/cli-usage/#next-steps","title":"Next Steps","text":"<ul> <li>Programmatic API \u2014 Use bugsafe in Python code</li> <li>CLI Reference \u2014 Complete option reference</li> </ul>"},{"location":"guides/custom-patterns/","title":"Custom Patterns","text":"<p>Add your own redaction patterns for project-specific secrets.</p>"},{"location":"guides/custom-patterns/#creating-a-pattern","title":"Creating a Pattern","text":"<pre><code>from bugsafe.redact.patterns import create_custom_pattern, Priority\n\npattern = create_custom_pattern(\n    name=\"my_internal_token\",\n    regex=r\"internal-[a-f0-9]{40}\",\n    category=\"INTERNAL_TOKEN\",\n    priority=Priority.HIGH,\n    description=\"Internal service tokens\",\n)\n</code></pre>"},{"location":"guides/custom-patterns/#pattern-components","title":"Pattern Components","text":"Field Description <code>name</code> Unique identifier <code>regex</code> Python regular expression <code>category</code> Token category (appears in output as <code>&lt;CATEGORY_N&gt;</code>) <code>priority</code> Detection priority (higher = checked first) <code>capture_group</code> Which regex group contains the secret (0 = full match)"},{"location":"guides/custom-patterns/#priority-levels","title":"Priority Levels","text":"Priority Value Use Case <code>CRITICAL</code> 100 Must never leak (private keys) <code>HIGH</code> 80 API keys, tokens <code>MEDIUM</code> 60 Passwords, connection strings <code>LOW</code> 40 Email addresses, IPs <code>OPTIONAL</code> 20 Context-dependent"},{"location":"guides/custom-patterns/#using-custom-patterns","title":"Using Custom Patterns","text":"<pre><code>from bugsafe.redact import create_redaction_engine\nfrom bugsafe.redact.patterns import PatternConfig\n\nconfig = PatternConfig(\n    custom_patterns=[my_pattern],\n    min_priority=Priority.MEDIUM,  # Skip LOW patterns\n)\n\nengine = create_redaction_engine(config=config)\n</code></pre>"},{"location":"guides/custom-patterns/#configuration-file","title":"Configuration File","text":"<p>Create <code>.bugsafe.toml</code> in your project:</p> <pre><code>[patterns]\ncustom = [\n    { name = \"internal_token\", regex = \"internal-[a-f0-9]{40}\", category = \"INTERNAL\" },\n]\ndisabled = [\"EMAIL\"]  # Disable email redaction\n</code></pre>"},{"location":"guides/custom-patterns/#next-steps","title":"Next Steps","text":"<ul> <li>Redaction Patterns Reference \u2014 All built-in patterns</li> <li>Security Model \u2014 How redaction works</li> </ul>"},{"location":"guides/llm-integration/","title":"LLM Integration","text":"<p>Optimize bugsafe output for AI assistants and language models.</p>"},{"location":"guides/llm-integration/#why-llm-optimized-output","title":"Why LLM-Optimized Output?","text":"<p>When sharing crash reports with LLMs:</p> <ul> <li>Token efficiency \u2014 Remove unnecessary verbosity</li> <li>Context preservation \u2014 Keep essential debugging info</li> <li>Safety \u2014 Secrets are already redacted</li> </ul>"},{"location":"guides/llm-integration/#cli-usage","title":"CLI Usage","text":"<pre><code>bugsafe render crash.bugbundle --llm\n</code></pre> <p>Output is optimized for pasting into ChatGPT, Claude, Copilot, etc.</p>"},{"location":"guides/llm-integration/#programmatic-usage","title":"Programmatic Usage","text":"<pre><code>from bugsafe.bundle import BugBundle\nfrom bugsafe.render import to_llm_context\n\nbundle = BugBundle.load(\"crash.bugbundle\")\n\n# Default: 4000 tokens\ncontext = to_llm_context(bundle)\n\n# Custom token limit\ncontext = to_llm_context(bundle, max_tokens=8000)\n</code></pre>"},{"location":"guides/llm-integration/#whats-included","title":"What's Included","text":"<p>The LLM context prioritizes:</p> <ol> <li>Error message \u2014 The actual exception</li> <li>Traceback \u2014 Stack trace with file locations</li> <li>Command info \u2014 What was run</li> <li>Environment \u2014 Python version, key packages</li> </ol>"},{"location":"guides/llm-integration/#whats-excluded","title":"What's Excluded","text":"<p>To save tokens:</p> <ul> <li>Full stdout/stderr (summarized)</li> <li>All environment variables (only relevant ones)</li> <li>Attachment contents (mentioned but not included)</li> </ul>"},{"location":"guides/llm-integration/#correlation-tokens","title":"Correlation Tokens","text":"<p>Secrets are replaced with consistent tokens:</p> <pre><code>Original: API_KEY=sk-abc123 used in requests.get(..., headers={\"Authorization\": sk-abc123})\nRedacted: API_KEY=&lt;API_KEY_1&gt; used in requests.get(..., headers={\"Authorization\": &lt;API_KEY_1&gt;})\n</code></pre> <p>This helps LLMs understand that the same secret appears in multiple places.</p>"},{"location":"guides/llm-integration/#next-steps","title":"Next Steps","text":"<ul> <li>Tokenization \u2014 How correlation works</li> <li>Security Model \u2014 What gets redacted</li> </ul>"},{"location":"guides/programmatic-api/","title":"Programmatic API","text":"<p>Use bugsafe directly in your Python code for custom integrations.</p>"},{"location":"guides/programmatic-api/#basic-usage","title":"Basic Usage","text":"<pre><code>from bugsafe.redact import create_redaction_engine\n\n# Create a redaction engine\nengine = create_redaction_engine()\n\n# Redact text\ntext = \"API key: sk-abc123xyz\"\nredacted, report = engine.redact(text)\n\nprint(redacted)  # \"API key: &lt;API_KEY_1&gt;\"\nprint(report.get_total())  # 1\n</code></pre>"},{"location":"guides/programmatic-api/#capture-and-bundle","title":"Capture and Bundle","text":"<pre><code>from bugsafe.capture import capture_command\nfrom bugsafe.bundle import create_bundle\n\n# Capture a command\nresult = capture_command([\"python\", \"my_script.py\"], timeout=60)\n\n# Create a bundle\nbundle = create_bundle(result)\n\n# Save to file\nbundle.save(\"crash.bugbundle\")\n</code></pre>"},{"location":"guides/programmatic-api/#custom-patterns","title":"Custom Patterns","text":"<pre><code>from bugsafe.redact import create_redaction_engine\nfrom bugsafe.redact.patterns import create_custom_pattern, PatternConfig\n\n# Create a custom pattern\nmy_pattern = create_custom_pattern(\n    name=\"my_token\",\n    regex=r\"myapp-[a-z0-9]{32}\",\n    category=\"MY_TOKEN\",\n)\n\n# Configure with custom pattern\nconfig = PatternConfig(custom_patterns=[my_pattern])\nengine = create_redaction_engine(config=config)\n</code></pre>"},{"location":"guides/programmatic-api/#render-output","title":"Render Output","text":"<pre><code>from bugsafe.bundle import BugBundle\nfrom bugsafe.render import to_markdown, to_json, to_llm_context\n\n# Load a bundle\nbundle = BugBundle.load(\"crash.bugbundle\")\n\n# Render in different formats\nmarkdown = to_markdown(bundle)\njson_output = to_json(bundle)\nllm_context = to_llm_context(bundle, max_tokens=4000)\n</code></pre>"},{"location":"guides/programmatic-api/#next-steps","title":"Next Steps","text":"<ul> <li>API Reference \u2014 Full API documentation</li> <li>Custom Patterns \u2014 Advanced pattern configuration</li> </ul>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Complete reference for all bugsafe commands and options.</p>"},{"location":"reference/cli/#global-options","title":"Global Options","text":"<pre><code>bugsafe [OPTIONS] COMMAND [ARGS]...\n</code></pre> Option Description <code>--version</code> Show version and exit <code>--help</code> Show help and exit"},{"location":"reference/cli/#bugsafe-run","title":"bugsafe run","text":"<p>Capture command execution and create a bundle.</p> <pre><code>bugsafe run [OPTIONS] -- COMMAND [ARGS]...\n</code></pre> Option Type Default Description <code>-o, --output</code> PATH Auto-generated Output bundle path <code>-t, --timeout</code> INTEGER None Command timeout in seconds <code>-a, --attach</code> PATH None Attach file (repeatable) <code>--no-redact</code> FLAG False Disable redaction"},{"location":"reference/cli/#bugsafe-render","title":"bugsafe render","text":"<p>Render a bundle to various formats.</p> <pre><code>bugsafe render [OPTIONS] BUNDLE_PATH\n</code></pre> Option Type Default Description <code>-f, --format</code> CHOICE markdown Output format: <code>markdown</code>, <code>json</code> <code>--llm</code> FLAG False Optimize for LLM context <code>-o, --output</code> PATH stdout Write to file"},{"location":"reference/cli/#bugsafe-inspect","title":"bugsafe inspect","text":"<p>View bundle metadata.</p> <pre><code>bugsafe inspect BUNDLE_PATH\n</code></pre>"},{"location":"reference/cli/#bugsafe-config","title":"bugsafe config","text":"<p>Manage configuration.</p> <pre><code>bugsafe config COMMAND\n</code></pre>"},{"location":"reference/cli/#subcommands","title":"Subcommands","text":"Command Description <code>show</code> Display current configuration <code>set KEY VALUE</code> Set a configuration value"},{"location":"reference/cli/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Command timeout 3 Bundle read error"},{"location":"reference/configuration/","title":"Configuration","text":"<p>Configure bugsafe behavior via files or environment variables.</p>"},{"location":"reference/configuration/#configuration-file","title":"Configuration File","text":"<p>Create <code>.bugsafe.toml</code> in your project root:</p> <pre><code>[redaction]\nmin_priority = \"medium\"\nredact_emails = true\nredact_ips = true\nredact_uuids = false\n\n[redaction.patterns]\ndisabled = [\"UUID\"]\ncustom = [\n    { name = \"internal_token\", regex = \"internal-[a-f0-9]{40}\", category = \"INTERNAL\" },\n]\n\n[output]\ndefault_format = \"markdown\"\nllm_max_tokens = 4000\n\n[capture]\ndefault_timeout = 300\nmax_output_size = \"10MB\"\n</code></pre>"},{"location":"reference/configuration/#environment-variables","title":"Environment Variables","text":"Variable Description Default <code>BUGSAFE_CONFIG</code> Config file path <code>.bugsafe.toml</code> <code>BUGSAFE_NO_REDACT</code> Disable redaction <code>false</code> <code>BUGSAFE_MIN_PRIORITY</code> Minimum pattern priority <code>optional</code>"},{"location":"reference/configuration/#priority-levels","title":"Priority Levels","text":"Level Value Patterns Included <code>critical</code> 100 Private keys only <code>high</code> 80 API keys, tokens <code>medium</code> 60 Passwords, connection strings <code>low</code> 40 Emails, IPs <code>optional</code> 20 UUIDs (if enabled)"},{"location":"reference/configuration/#precedence","title":"Precedence","text":"<p>Configuration is applied in order (later overrides earlier):</p> <ol> <li>Built-in defaults</li> <li><code>.bugsafe.toml</code> in project root</li> <li><code>~/.config/bugsafe/config.toml</code> (user config)</li> <li>Environment variables</li> <li>CLI options</li> </ol>"},{"location":"reference/configuration/#see-also","title":"See Also","text":"<ul> <li>Redaction Patterns</li> <li>Custom Patterns</li> </ul>"},{"location":"reference/patterns/","title":"Redaction Patterns","text":"<p>Complete list of built-in secret detection patterns.</p>"},{"location":"reference/patterns/#pattern-categories","title":"Pattern Categories","text":""},{"location":"reference/patterns/#cloud-provider-keys","title":"Cloud Provider Keys","text":"Pattern Category Priority Example AWS Access Key <code>AWS_KEY</code> Critical <code>AKIA...</code> AWS Secret Key <code>AWS_SECRET</code> Critical <code>wJalr...</code> GCP API Key <code>GCP_KEY</code> High <code>AIza...</code> Azure Connection String <code>AZURE_CONN</code> High <code>DefaultEndpointsProtocol=...</code>"},{"location":"reference/patterns/#version-control","title":"Version Control","text":"Pattern Category Priority Example GitHub Token <code>GITHUB_TOKEN</code> Critical <code>ghp_...</code>, <code>gho_...</code> GitLab Token <code>GITLAB_TOKEN</code> High <code>glpat-...</code> Bitbucket Token <code>BITBUCKET_TOKEN</code> High <code>ATBB...</code>"},{"location":"reference/patterns/#communication-platforms","title":"Communication Platforms","text":"Pattern Category Priority Example Slack Token <code>SLACK_TOKEN</code> High <code>xoxb-...</code>, <code>xoxp-...</code> Discord Token <code>DISCORD_TOKEN</code> High <code>NjE...</code> Twilio SID <code>TWILIO_SID</code> High <code>AC...</code>"},{"location":"reference/patterns/#payment-providers","title":"Payment Providers","text":"Pattern Category Priority Example Stripe API Key <code>STRIPE_KEY</code> Critical <code>sk_live_...</code>, <code>sk_test_...</code> PayPal Client ID <code>PAYPAL_ID</code> High Long alphanumeric"},{"location":"reference/patterns/#database","title":"Database","text":"Pattern Category Priority Example PostgreSQL URL <code>DB_URL</code> High <code>postgresql://user:pass@host/db</code> MongoDB URL <code>MONGO_URL</code> High <code>mongodb://...</code> Redis URL <code>REDIS_URL</code> High <code>redis://...</code>"},{"location":"reference/patterns/#authentication","title":"Authentication","text":"Pattern Category Priority Example JWT <code>JWT</code> High <code>eyJ...</code> Bearer Token <code>BEARER</code> High <code>Bearer ...</code> Basic Auth <code>BASIC_AUTH</code> High <code>Basic ...</code>"},{"location":"reference/patterns/#cryptographic","title":"Cryptographic","text":"Pattern Category Priority Example Private Key <code>PRIVATE_KEY</code> Critical <code>-----BEGIN RSA PRIVATE KEY-----</code> SSH Key <code>SSH_KEY</code> Critical <code>-----BEGIN OPENSSH PRIVATE KEY-----</code>"},{"location":"reference/patterns/#personal-information","title":"Personal Information","text":"Pattern Category Priority Example Email <code>EMAIL</code> Low <code>user@example.com</code> IP Address <code>IP</code> Low <code>192.168.1.1</code> UUID <code>UUID</code> Optional <code>550e8400-e29b-...</code>"},{"location":"reference/patterns/#token-format","title":"Token Format","text":"<p>Redacted secrets are replaced with tokens:</p> <pre><code>&lt;CATEGORY_N&gt;\n</code></pre> <p>Where: - <code>CATEGORY</code> \u2014 Pattern category (e.g., <code>AWS_KEY</code>) - <code>N</code> \u2014 Occurrence number (for correlation)</p>"},{"location":"reference/patterns/#disabling-patterns","title":"Disabling Patterns","text":"<pre><code>from bugsafe.redact.patterns import PatternConfig\n\nconfig = PatternConfig(\n    disabled_patterns={\"EMAIL\", \"UUID\"},\n    redact_emails=False,\n    redact_ips=False,\n)\n</code></pre>"},{"location":"reference/patterns/#see-also","title":"See Also","text":"<ul> <li>Custom Patterns</li> <li>Security Model</li> </ul>"},{"location":"reference/api/bundle/","title":"Bundle API","text":"<p>The bundle module handles the <code>.bugbundle</code> file format.</p>"},{"location":"reference/api/bundle/#overview","title":"Overview","text":"<pre><code>from bugsafe.bundle.schema import BugBundle, CaptureOutput\nfrom bugsafe.bundle.writer import write_bundle\nfrom bugsafe.bundle.reader import read_bundle\n\n# Create a bundle\nbundle = BugBundle(\n    capture=CaptureOutput(\n        stdout=\"output\",\n        stderr=\"error\",\n        exit_code=1,\n        command=[\"python\", \"script.py\"],\n    )\n)\n\n# Write to file\nwrite_bundle(bundle, \"crash.bugbundle\")\n\n# Read from file\nloaded = read_bundle(\"crash.bugbundle\")\n</code></pre>"},{"location":"reference/api/bundle/#schema","title":"Schema","text":""},{"location":"reference/api/bundle/#bugbundle","title":"BugBundle","text":"<p>Complete bug bundle containing all captured data.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.BugBundle","title":"<code>bugsafe.bundle.schema.BugBundle</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Complete bug bundle.</p> <p>Attributes:</p> Name Type Description <code>metadata</code> <code>BundleMetadata</code> <p>Bundle metadata.</p> <code>capture</code> <code>CaptureOutput</code> <p>Captured command output.</p> <code>traceback</code> <code>Traceback | None</code> <p>Parsed traceback (if available).</p> <code>environment</code> <code>Environment | None</code> <p>Environment snapshot.</p> <code>redaction_report</code> <code>dict[str, int]</code> <p>Summary of redactions by category.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.BugBundle.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert bundle to dictionary for JSON serialization.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.BugBundle.from_dict","title":"<code>from_dict(data)</code>  <code>classmethod</code>","text":"<p>Create bundle from dictionary.</p>"},{"location":"reference/api/bundle/#captureoutput","title":"CaptureOutput","text":"<p>Captured command output.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.CaptureOutput","title":"<code>bugsafe.bundle.schema.CaptureOutput</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Captured command output.</p> <p>Attributes:</p> Name Type Description <code>stdout</code> <code>str</code> <p>Standard output (redacted).</p> <code>stderr</code> <code>str</code> <p>Standard error (redacted).</p> <code>exit_code</code> <code>int</code> <p>Process exit code.</p> <code>duration_ms</code> <code>int</code> <p>Execution duration in milliseconds.</p> <code>command</code> <code>list[str]</code> <p>The executed command.</p> <code>timed_out</code> <code>bool</code> <p>Whether the command timed out.</p> <code>truncated</code> <code>bool</code> <p>Whether output was truncated.</p>"},{"location":"reference/api/bundle/#traceback","title":"Traceback","text":"<p>Structured Python traceback.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.Traceback","title":"<code>bugsafe.bundle.schema.Traceback</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Structured representation of a Python traceback.</p> <p>Attributes:</p> Name Type Description <code>exception_type</code> <code>str</code> <p>The type of exception raised.</p> <code>message</code> <code>str</code> <p>The exception message.</p> <code>frames</code> <code>list[Frame]</code> <p>List of stack frames.</p> <code>chained</code> <code>list[Traceback] | None</code> <p>Chained exceptions (cause/context).</p>"},{"location":"reference/api/bundle/#environment","title":"Environment","text":"<p>Environment snapshot.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.Environment","title":"<code>bugsafe.bundle.schema.Environment</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Environment snapshot.</p> <p>Attributes:</p> Name Type Description <code>python_version</code> <code>str</code> <p>Full Python version string.</p> <code>python_executable</code> <code>str</code> <p>Path to Python executable.</p> <code>platform</code> <code>str</code> <p>Platform identifier string.</p> <code>packages</code> <code>list[PackageInfo]</code> <p>List of installed packages.</p> <code>env_vars</code> <code>dict[str, str]</code> <p>Filtered environment variables.</p> <code>cwd</code> <code>str</code> <p>Current working directory.</p> <code>git</code> <code>GitInfo | None</code> <p>Git repository information.</p> <code>virtualenv</code> <code>bool</code> <p>Whether running in virtualenv.</p> <code>in_container</code> <code>bool</code> <p>Whether running in container.</p> <code>ci_detected</code> <code>bool</code> <p>Whether running in CI.</p>"},{"location":"reference/api/bundle/#bundlemetadata","title":"BundleMetadata","text":"<p>Bundle metadata.</p>"},{"location":"reference/api/bundle/#bugsafe.bundle.schema.BundleMetadata","title":"<code>bugsafe.bundle.schema.BundleMetadata</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>Bundle metadata.</p> <p>Attributes:</p> Name Type Description <code>version</code> <code>str</code> <p>Bundle format version.</p> <code>created_at</code> <code>datetime</code> <p>Creation timestamp.</p> <code>bugsafe_version</code> <code>str</code> <p>bugsafe version used to create bundle.</p> <code>redaction_salt_hash</code> <code>str</code> <p>SHA256 hash of redaction salt.</p>"},{"location":"reference/api/bundle/#readerwriter-functions","title":"Reader/Writer Functions","text":""},{"location":"reference/api/bundle/#read_bundle","title":"read_bundle","text":""},{"location":"reference/api/bundle/#bugsafe.bundle.reader.read_bundle","title":"<code>bugsafe.bundle.reader.read_bundle(path)</code>","text":"<p>Read and parse a .bugbundle file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the bundle file.</p> required <p>Returns:</p> Type Description <code>BugBundle</code> <p>Parsed BugBundle.</p> <p>Raises:</p> Type Description <code>BundleNotFoundError</code> <p>If file doesn't exist.</p> <code>BundleCorruptError</code> <p>If ZIP is invalid.</p> <code>BundleParseError</code> <p>If JSON parsing fails.</p> <code>BundleSchemaError</code> <p>If schema validation fails.</p> <code>BundleVersionError</code> <p>If version is unsupported.</p>"},{"location":"reference/api/bundle/#create_bundle","title":"create_bundle","text":""},{"location":"reference/api/bundle/#bugsafe.bundle.writer.create_bundle","title":"<code>bugsafe.bundle.writer.create_bundle(bundle, path, *, overwrite=True)</code>","text":"<p>Create a .bugbundle file.</p> <p>Parameters:</p> Name Type Description Default <code>bundle</code> <code>BugBundle</code> <p>The BugBundle to write.</p> required <code>path</code> <code>Path</code> <p>Output path for the bundle.</p> required <code>overwrite</code> <code>bool</code> <p>Whether to overwrite existing file.</p> <code>True</code> <p>Raises:</p> Type Description <code>BundleWriteError</code> <p>If writing fails.</p> <code>BundleSizeError</code> <p>If bundle exceeds size limit.</p> <code>FileExistsError</code> <p>If file exists and overwrite=False.</p>"},{"location":"reference/api/bundle/#validate_bundle","title":"validate_bundle","text":""},{"location":"reference/api/bundle/#bugsafe.bundle.writer.validate_bundle","title":"<code>bugsafe.bundle.writer.validate_bundle(path)</code>","text":"<p>Validate a bundle file.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path</code> <p>Path to the bundle.</p> required <p>Returns:</p> Type Description <code>ValidationResult</code> <p>ValidationResult with validity status and any issues.</p>"},{"location":"reference/api/capture/","title":"Capture API","text":"<p>The capture module executes commands and captures their output.</p>"},{"location":"reference/api/capture/#overview","title":"Overview","text":"<pre><code>from bugsafe.capture.runner import run_command, CaptureConfig\n\n# Run with default settings\nresult = run_command([\"python\", \"script.py\"])\nprint(result.exit_code)\nprint(result.stdout)\n\n# Run with custom config\nconfig = CaptureConfig(timeout=60, max_output_bytes=1_000_000)\nresult = run_command([\"python\", \"script.py\"], config)\n</code></pre>"},{"location":"reference/api/capture/#captureconfig","title":"CaptureConfig","text":"<p>Configuration for command capture.</p>"},{"location":"reference/api/capture/#bugsafe.capture.runner.CaptureConfig","title":"<code>bugsafe.capture.runner.CaptureConfig</code>  <code>dataclass</code>","text":"<p>Configuration for command capture.</p> <p>Attributes:</p> Name Type Description <code>timeout</code> <code>int</code> <p>Maximum execution time in seconds.</p> <code>max_output_bytes</code> <code>int</code> <p>Maximum bytes per stream (stdout/stderr).</p> <code>max_total_bytes</code> <code>int</code> <p>Maximum total bytes for bundle.</p> <code>encoding</code> <code>str</code> <p>Text encoding for output.</p> <code>encoding_errors</code> <code>str</code> <p>How to handle encoding errors.</p> <code>preserve_ansi</code> <code>bool</code> <p>Whether to preserve ANSI escape codes.</p> <code>strip_cr</code> <code>bool</code> <p>Whether to normalize \\r\\n to \\n.</p> <code>cwd</code> <code>Path | None</code> <p>Working directory for command execution.</p> <code>env_passthrough</code> <code>frozenset[str]</code> <p>Environment variables to pass through.</p>"},{"location":"reference/api/capture/#captureresult","title":"CaptureResult","text":"<p>Result of command execution.</p>"},{"location":"reference/api/capture/#bugsafe.capture.runner.CaptureResult","title":"<code>bugsafe.capture.runner.CaptureResult</code>  <code>dataclass</code>","text":"<p>Result of command capture.</p> <p>Attributes:</p> Name Type Description <code>command</code> <code>list[str]</code> <p>The executed command.</p> <code>stdout</code> <code>str</code> <p>Captured standard output.</p> <code>stderr</code> <code>str</code> <p>Captured standard error.</p> <code>exit_code</code> <code>int</code> <p>Process exit code (-1 for errors, -2 for timeout).</p> <code>duration_ms</code> <code>int</code> <p>Execution duration in milliseconds.</p> <code>signal_num</code> <code>int | None</code> <p>Signal number if process was killed.</p> <code>timed_out</code> <code>bool</code> <p>Whether the process timed out.</p> <code>truncated_stdout</code> <code>bool</code> <p>Whether stdout was truncated.</p> <code>truncated_stderr</code> <code>bool</code> <p>Whether stderr was truncated.</p> <code>encoding_errors_count</code> <code>int</code> <p>Number of encoding errors encountered.</p> <code>is_binary_stdout</code> <code>bool</code> <p>Whether stdout is binary (base64 encoded).</p> <code>is_binary_stderr</code> <code>bool</code> <p>Whether stderr is binary (base64 encoded).</p> <code>error_message</code> <code>str | None</code> <p>Error message if command failed to start.</p>"},{"location":"reference/api/capture/#run_command","title":"run_command","text":"<p>Execute a command and capture output.</p>"},{"location":"reference/api/capture/#bugsafe.capture.runner.run_command","title":"<code>bugsafe.capture.runner.run_command(cmd, config=None)</code>","text":"<p>Execute a command and capture its output.</p> <p>Parameters:</p> Name Type Description Default <code>cmd</code> <code>Sequence[str]</code> <p>Command and arguments to execute.</p> required <code>config</code> <code>CaptureConfig | None</code> <p>Capture configuration options.</p> <code>None</code> <p>Returns:</p> Type Description <code>CaptureResult</code> <p>CaptureResult with captured output and metadata.</p> <p>Raises:</p> Type Description <code>KeyboardInterrupt</code> <p>If interrupted by user (after cleanup).</p>"},{"location":"reference/api/redact/","title":"Redaction API","text":"<p>The redaction module provides the core functionality for detecting and redacting secrets.</p>"},{"location":"reference/api/redact/#overview","title":"Overview","text":"<pre><code>from bugsafe.redact import RedactionEngine, PatternConfig\n\n# Create engine with default settings\nengine = RedactionEngine()\n\n# Redact text\ntext = \"API_KEY=sk-abc123xyz\"\nredacted, report = engine.redact(text)\nprint(redacted)  # API_KEY=&lt;API_KEY_1&gt;\nprint(report.get_total())  # 1\n</code></pre>"},{"location":"reference/api/redact/#redactionengine","title":"RedactionEngine","text":"<p>Main orchestrator for secret redaction.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionEngine","title":"<code>bugsafe.redact.engine.RedactionEngine</code>  <code>dataclass</code>","text":"<p>Main redaction engine.</p> <p>Orchestrates pattern matching, tokenization, and path anonymization to redact sensitive information from text.</p> <p>Attributes:</p> Name Type Description <code>tokenizer</code> <code>Tokenizer</code> <p>Tokenizer for generating replacement tokens.</p> <code>path_anonymizer</code> <code>PathAnonymizer</code> <p>Path anonymizer for file paths.</p> <code>config</code> <code>PatternConfig</code> <p>Pattern configuration.</p> <code>patterns</code> <code>list[Pattern]</code> <p>List of patterns to use.</p> <code>timeout_ms</code> <code>int</code> <p>Timeout per pattern in milliseconds.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionEngine.redact","title":"<code>redact(text)</code>","text":"<p>Redact sensitive information from text.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Text to redact.</p> required <p>Returns:</p> Type Description <code>tuple[str, RedactionReport]</code> <p>Tuple of (redacted_text, report).</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionEngine.verify_redaction","title":"<code>verify_redaction(text)</code>","text":"<p>Verify that no high-priority secrets remain in text.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Text to verify.</p> required <p>Returns:</p> Type Description <code>list[str]</code> <p>List of pattern names that still match (potential leaks).</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionEngine.get_salt_hash","title":"<code>get_salt_hash()</code>","text":"<p>Get the salt hash for bundle metadata.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionEngine.get_redaction_summary","title":"<code>get_redaction_summary()</code>","text":"<p>Get summary of redactions from tokenizer.</p>"},{"location":"reference/api/redact/#redactionreport","title":"RedactionReport","text":"<p>Tracks all redactions performed in a session.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionReport","title":"<code>bugsafe.redact.engine.RedactionReport</code>  <code>dataclass</code>","text":"<p>Report of redactions performed.</p> <p>Attributes:</p> Name Type Description <code>matches</code> <code>list[RedactionMatch]</code> <p>List of all redaction matches.</p> <code>categories</code> <code>dict[str, int]</code> <p>Count of redactions by category.</p> <code>patterns_used</code> <code>set[str]</code> <p>Set of pattern names that matched.</p> <code>warnings</code> <code>list[str]</code> <p>Any warnings during redaction.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionReport.add","title":"<code>add(original, token, category, pattern_name, start=0, end=0)</code>","text":"<p>Add a redaction match to the report.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionReport.merge","title":"<code>merge(other)</code>","text":"<p>Merge another report into this one.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionReport.get_summary","title":"<code>get_summary()</code>","text":"<p>Get summary of redactions by category.</p>"},{"location":"reference/api/redact/#bugsafe.redact.engine.RedactionReport.get_total","title":"<code>get_total()</code>","text":"<p>Get total number of redactions.</p>"},{"location":"reference/api/redact/#pattern","title":"Pattern","text":"<p>Defines a secret detection pattern.</p>"},{"location":"reference/api/redact/#bugsafe.redact.patterns.Pattern","title":"<code>bugsafe.redact.patterns.Pattern</code>  <code>dataclass</code>","text":"<p>A secret detection pattern.</p> <p>Attributes:</p> Name Type Description <code>name</code> <code>str</code> <p>Unique identifier for the pattern.</p> <code>regex</code> <code>Pattern[str]</code> <p>Compiled regular expression.</p> <code>category</code> <code>str</code> <p>Category for token naming (e.g., AWS_KEY, EMAIL).</p> <code>priority</code> <code>int</code> <p>Pattern priority (higher = more important).</p> <code>capture_group</code> <code>int</code> <p>Which regex group contains the secret (0 = full match).</p> <code>description</code> <code>str</code> <p>Human-readable description.</p>"},{"location":"reference/api/redact/#patternconfig","title":"PatternConfig","text":"<p>Configuration for pattern matching behavior.</p>"},{"location":"reference/api/redact/#bugsafe.redact.patterns.PatternConfig","title":"<code>bugsafe.redact.patterns.PatternConfig</code>  <code>dataclass</code>","text":"<p>Configuration for pattern matching.</p> <p>Attributes:</p> Name Type Description <code>enabled_patterns</code> <code>set[str] | None</code> <p>Set of pattern names to enable (None = all).</p> <code>disabled_patterns</code> <code>set[str]</code> <p>Set of pattern names to disable.</p> <code>custom_patterns</code> <code>list[Pattern]</code> <p>Additional custom patterns.</p> <code>min_priority</code> <code>int</code> <p>Minimum priority threshold.</p> <code>redact_emails</code> <code>bool</code> <p>Whether to redact email addresses.</p> <code>redact_ips</code> <code>bool</code> <p>Whether to redact IP addresses.</p> <code>redact_uuids</code> <code>bool</code> <p>Whether to redact UUIDs.</p>"},{"location":"reference/api/redact/#tokenizer","title":"Tokenizer","text":"<p>Deterministic, correlation-preserving tokenizer.</p>"},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer","title":"<code>bugsafe.redact.tokenizer.Tokenizer</code>  <code>dataclass</code>","text":"<p>Deterministic, correlation-preserving secret tokenizer.</p> <p>Ensures that the same secret always maps to the same token within a single redaction session, preserving correlations across different parts of the output.</p> <p>Attributes:</p> Name Type Description <code>salt</code> <code>bytes</code> <p>Random bytes used for the session (not stored, only hash).</p> <code>_cache</code> <code>dict[str, str]</code> <p>Internal cache mapping secrets to tokens.</p> <code>_counter</code> <code>int</code> <p>Sequential counter for token numbering.</p>"},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer.tokenize","title":"<code>tokenize(secret, category)</code>","text":"<p>Replace a secret with a deterministic token.</p> <p>Parameters:</p> Name Type Description Default <code>secret</code> <code>str</code> <p>The secret value to tokenize.</p> required <code>category</code> <code>str</code> <p>Category for the token (e.g., AWS_KEY, EMAIL).</p> required <p>Returns:</p> Type Description <code>str</code> <p>Token string in format ."},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer.is_token","title":"<code>is_token(text)</code>","text":"<p>Check if text is a redaction token.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>Text to check.</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if text matches token format.</p>"},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer.get_salt_hash","title":"<code>get_salt_hash()</code>","text":"<p>Get SHA256 hash of the salt for bundle metadata.</p> <p>Returns:</p> Type Description <code>str</code> <p>Hexadecimal hash string.</p>"},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer.get_report","title":"<code>get_report()</code>","text":"<p>Get count of tokens by category.</p> <p>Returns:</p> Type Description <code>dict[str, int]</code> <p>Dictionary mapping category names to token counts.</p>"},{"location":"reference/api/redact/#bugsafe.redact.tokenizer.Tokenizer.reset","title":"<code>reset()</code>","text":"<p>Reset the tokenizer state for a new session.</p>"},{"location":"reference/api/redact/#factory-functions","title":"Factory Functions","text":""},{"location":"reference/api/redact/#bugsafe.redact.engine.create_redaction_engine","title":"<code>bugsafe.redact.engine.create_redaction_engine(project_root=None, config=None)</code>","text":"<p>Create a configured redaction engine.</p> <p>Parameters:</p> Name Type Description Default <code>project_root</code> <code>Path | None</code> <p>Project root for path anonymization.</p> <code>None</code> <code>config</code> <code>PatternConfig | None</code> <p>Optional pattern configuration.</p> <code>None</code> <p>Returns:</p> Type Description <code>RedactionEngine</code> <p>Configured RedactionEngine.</p>"},{"location":"reference/api/redact/#bugsafe.redact.patterns.create_custom_pattern","title":"<code>bugsafe.redact.patterns.create_custom_pattern(name, pattern, category, priority=Priority.MEDIUM, capture_group=0, flags=0)</code>","text":"<p>Create a custom pattern.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Unique pattern identifier.</p> required <code>pattern</code> <code>str</code> <p>Regular expression string.</p> required <code>category</code> <code>str</code> <p>Category for token naming.</p> required <code>priority</code> <code>int</code> <p>Pattern priority.</p> <code>MEDIUM</code> <code>capture_group</code> <code>int</code> <p>Which group contains the secret.</p> <code>0</code> <code>flags</code> <code>int</code> <p>Regex flags.</p> <code>0</code> <p>Returns:</p> Type Description <code>Pattern</code> <p>New Pattern instance.</p>"},{"location":"reference/api/render/","title":"Render API","text":"<p>The render module converts bundles to various output formats.</p>"},{"location":"reference/api/render/#overview","title":"Overview","text":"<pre><code>from bugsafe.bundle.reader import read_bundle\nfrom bugsafe.render.markdown import render_markdown\n\n# Load and render\nbundle = read_bundle(\"crash.bugbundle\")\nmarkdown = render_markdown(bundle)\nprint(markdown)\n</code></pre>"},{"location":"reference/api/render/#markdown-renderer","title":"Markdown Renderer","text":"<p>Render bundles as human-readable Markdown.</p>"},{"location":"reference/api/render/#bugsafe.render.markdown.render_markdown","title":"<code>bugsafe.render.markdown.render_markdown(bundle)</code>","text":"<p>Render a BugBundle as Markdown.</p> <p>Parameters:</p> Name Type Description Default <code>bundle</code> <code>BugBundle</code> <p>The bundle to render.</p> required <p>Returns:</p> Type Description <code>str</code> <p>Markdown string.</p>"},{"location":"reference/api/render/#json-export","title":"JSON Export","text":""},{"location":"reference/api/render/#bugsafe.render.json_export","title":"<code>bugsafe.render.json_export</code>","text":"<p>JSON export - Generate JSON output and LLM-optimized context from bundles.</p>"},{"location":"reference/api/render/#bugsafe.render.json_export.to_json","title":"<code>to_json(bundle, *, indent=2)</code>","text":"<p>Export bundle as JSON string.</p> <p>Parameters:</p> Name Type Description Default <code>bundle</code> <code>BugBundle</code> <p>The bundle to export.</p> required <code>indent</code> <code>int</code> <p>JSON indentation level.</p> <code>2</code> <p>Returns:</p> Type Description <code>str</code> <p>JSON string representation.</p> Source code in <code>src/bugsafe/render/json_export.py</code> <pre><code>def to_json(bundle: BugBundle, *, indent: int = 2) -&gt; str:\n    \"\"\"Export bundle as JSON string.\n\n    Args:\n        bundle: The bundle to export.\n        indent: JSON indentation level.\n\n    Returns:\n        JSON string representation.\n    \"\"\"\n    return json.dumps(bundle.to_dict(), indent=indent, default=str, ensure_ascii=False)\n</code></pre>"},{"location":"reference/api/render/#bugsafe.render.json_export.to_llm_context","title":"<code>to_llm_context(bundle, max_tokens=DEFAULT_MAX_TOKENS)</code>","text":"<p>Generate LLM-optimized context from bundle.</p> <p>Prioritizes: 1. Error message and traceback 2. Command and exit code 3. Relevant environment info 4. Truncated stdout/stderr if space allows</p> <p>Parameters:</p> Name Type Description Default <code>bundle</code> <code>BugBundle</code> <p>The bundle to render.</p> required <code>max_tokens</code> <code>int</code> <p>Maximum token budget.</p> <code>DEFAULT_MAX_TOKENS</code> <p>Returns:</p> Type Description <code>str</code> <p>LLM-optimized context string.</p> Source code in <code>src/bugsafe/render/json_export.py</code> <pre><code>def to_llm_context(\n    bundle: BugBundle,\n    max_tokens: int = DEFAULT_MAX_TOKENS,\n) -&gt; str:\n    \"\"\"Generate LLM-optimized context from bundle.\n\n    Prioritizes:\n    1. Error message and traceback\n    2. Command and exit code\n    3. Relevant environment info\n    4. Truncated stdout/stderr if space allows\n\n    Args:\n        bundle: The bundle to render.\n        max_tokens: Maximum token budget.\n\n    Returns:\n        LLM-optimized context string.\n    \"\"\"\n    sections: list[str] = []\n    remaining_tokens = max_tokens\n\n    header = _build_header(bundle)\n    sections.append(header)\n    remaining_tokens -= _estimate_tokens(header)\n\n    if bundle.traceback:\n        error_section = _build_error_section(bundle)\n        error_tokens = _estimate_tokens(error_section)\n        if error_tokens &lt;= remaining_tokens:\n            sections.append(error_section)\n            remaining_tokens -= error_tokens\n\n    env_section = _build_env_section(bundle)\n    env_tokens = _estimate_tokens(env_section)\n    if env_tokens &lt;= remaining_tokens:\n        sections.append(env_section)\n        remaining_tokens -= env_tokens\n\n    if bundle.capture.stderr and remaining_tokens &gt; 100:\n        stderr_budget = min(remaining_tokens // 2, 1000)\n        stderr_truncated, _ = _truncate_to_tokens(bundle.capture.stderr, stderr_budget)\n        stderr_section = f\"## stderr\\n```\\n{stderr_truncated}\\n```\"\n        sections.append(stderr_section)\n        remaining_tokens -= _estimate_tokens(stderr_section)\n\n    if bundle.capture.stdout and remaining_tokens &gt; 100:\n        stdout_truncated, _ = _truncate_to_tokens(\n            bundle.capture.stdout, remaining_tokens - 50\n        )\n        stdout_section = f\"## stdout\\n```\\n{stdout_truncated}\\n```\"\n        sections.append(stdout_section)\n\n    if bundle.redaction_report:\n        redaction_note = _build_redaction_note(bundle)\n        sections.append(redaction_note)\n\n    return \"\\n\\n\".join(sections)\n</code></pre>"}]}